import{r as j,j as e,a as Y}from"./react-DHBI0EtI.js";import{c as U}from"./react-dom-CAvYKTQr.js";import{F as C,A as G,I as T,C as H,B as F,a as W,L as q,D,M as K}from"./antd-_7L2MVw9.js";import{o as J,l as Q,m as X,p as Z,q as V,d as ee,r as te,s as ne,t as ie}from"./@ant-design/icons-DIEzQtf9.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./rc-util-CR6zMcjk.js";import"./@babel/runtime-bjg2LrFx.js";import"./react-is-DcAOwtUU.js";import"./@ant-design/cssinjs-BZ28ZvVG.js";import"./@emotion/hash-WldOFDRm.js";import"./@emotion/unitless-BWzHn38B.js";import"./stylis-D5iaQeiq.js";import"./@ant-design/cssinjs-utils-DNpUZUKa.js";import"./rc-resize-observer-C3F9A2Et.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-DZAqVlM9.js";import"./rc-overflow-Bz3aBegq.js";import"./rc-menu-zNzX5hbi.js";import"./@rc-component/trigger-Cm5gXpXC.js";import"./@rc-component/portal-CKG0rBEC.js";import"./@ant-design/fast-color-DQS9xAp9.js";import"./rc-tabs-Da1obS1T.js";import"./rc-dropdown-BoKU6xCl.js";import"./rc-checkbox-B8polaY2.js";import"./@rc-component/color-picker-Cz0ltABE.js";import"./rc-drawer-CQdaxwDv.js";import"./rc-field-form-Dl7VKChT.js";import"./@rc-component/async-validator-B_KGBgLV.js";import"./scroll-into-view-if-needed-Bq0bK-M8.js";import"./compute-scroll-into-view-Bl8rNFhg.js";import"./rc-tooltip-jhUaxYXA.js";import"./rc-input-BFhV7Njt.js";import"./rc-textarea-BTFOhnYj.js";import"./rc-pagination-Dq8hgW-2.js";import"./rc-picker-DwsNhNZh.js";import"./@ant-design/colors-Dib51zE1.js";import"./@ant-design/icons-svg-Dywg6pqi.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))p(t);new MutationObserver(t=>{for(const u of t)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&p(g)}).observe(document,{childList:!0,subtree:!0});function a(t){const u={};return t.integrity&&(u.integrity=t.integrity),t.referrerPolicy&&(u.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?u.credentials="include":t.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function p(t){if(t.ep)return;t.ep=!0;const u=a(t);fetch(t.href,u)}})();const B="https://flashinfo.mamda-mcma.ma/flashInfo/api";function L({url:l,data:r,method:a="GET",headers:p={},timeout:t=1e4}){const u={"Content-Type":"application/json",Accept:"application/json",...p};try{const h=localStorage.getItem("flashinfo_token");h&&(u.Authorization=`Bearer ${h}`)}catch{}const g={method:a,headers:u,signal:AbortSignal.timeout(t)};return r&&(a==="POST"||a==="PUT"||a==="PATCH")&&(g.body=JSON.stringify(r)),fetch(l,g).then(async h=>{if(!h.ok){const _=await h.text().catch(()=>"")||h.statusText,y=new Error(`Erreur HTTP: ${h.status} - ${_}`);throw y.status=h.status,y.body=_,y}return h.status===204?null:(h.headers.get("content-type")||"").includes("application/json")?await h.json():await h.text()}).catch(h=>{if(h.name==="AbortError"){const x=new Error("Timeout: La requête a pris trop de temps");throw x.name="AbortError",x}throw h})}function se(){return L({url:B+"/chiffre-affaires",method:"GET"})}function k(){return L({url:B+"/ca-non-vie-this-month",method:"GET"})}const E="/flashInfoApp/assets/MamdaMcma_Logo%20instit-BC1jT0T5.png",oe="/flashInfoApp/assets/coin-DihKcplc.png",re=({onLogin:l})=>{const[r]=C.useForm(),[a,p]=j.useState(!1),[t,u]=j.useState(""),g=async x=>{p(!0),u("");const{username:b="guest",password:_="default"}=x,y=`token_${b}_${Date.now()}`;localStorage.setItem("flashinfo_token",y),l(y),p(!1)},h=()=>{};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"left-section",children:[e.jsx("div",{className:"gradient-background"}),e.jsx("div",{className:"particles-effect"}),e.jsx("div",{className:"left-content",children:e.jsxs("div",{className:"left-inner",children:[e.jsxs("div",{className:"graph-container",children:[e.jsx("img",{src:oe,alt:"Illustration financière avec graphiques et visualisations de données",className:"graph-image"}),e.jsx("div",{className:"graph-overlay"})]}),e.jsxs("h1",{className:"main-title",children:[e.jsx("span",{className:"title-gradient",children:"FlashInfo"}),e.jsx("br",{}),e.jsx("span",{className:"title-subtitle",children:"Dashboard"})]}),e.jsx("p",{className:"description",children:"Accédez instantanément à vos informations critiques et pilotez vos données en temps réel avec FlashInfo."}),e.jsxs("div",{className:"decorative-bars",children:[e.jsx("div",{className:"bar-1"}),e.jsx("div",{className:"bar-2"}),e.jsx("div",{className:"bar-3"})]}),e.jsx("div",{className:"info-card",children:e.jsx("div",{className:"info-row",children:e.jsx("span",{className:"info-value",children:"MAMDA • MCMA"})})})]})})]}),e.jsx("div",{className:"right-section",children:e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("img",{src:E,alt:"Logo MamdaMcma",className:"logo"}),e.jsx("h2",{className:"welcome-title",children:e.jsx("span",{className:"welcome-gradient",children:"Bienvenue"})}),e.jsx("p",{className:"subtitle",children:"Connectez-vous à votre tableau de bord FlashInfo."})]}),t&&e.jsx(G,{message:t,type:"error",showIcon:!0,style:{marginBottom:"24px"},closable:!0,onClose:()=>u("")}),e.jsx("div",{className:"form-section",children:e.jsxs(C,{form:r,name:"login",onFinish:g,onFinishFailed:h,layout:"vertical",size:"large",className:"custom-form",children:[e.jsx(C.Item,{name:"username",label:"Nom d'utilisateur",rules:[],children:e.jsx(T,{prefix:e.jsx(J,{style:{color:"#951b81"}}),placeholder:"votre_nom_utilisateur (optionnel)",className:"custom-input"})}),e.jsx(C.Item,{name:"password",label:"Mot de passe",rules:[],children:e.jsx(T.Password,{prefix:e.jsx(Z,{style:{color:"#951b81"}}),placeholder:"•••••••• (optionnel)",iconRender:x=>x?e.jsx(Q,{style:{color:"#951b81"}}):e.jsx(X,{style:{color:"#951b81"}}),className:"custom-input"})}),e.jsxs("div",{className:"checkbox-section",children:[e.jsx(C.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(H,{className:"custom-checkbox",children:"Se souvenir de moi"})}),e.jsx("a",{href:"#",className:"forgot-link",children:"Mot de passe oublié ?"})]}),e.jsx(C.Item,{style:{marginTop:"24px"},children:e.jsx(F,{type:"primary",htmlType:"submit",loading:a,className:"custom-button",children:a?"Connexion...":"Se connecter"})})]})})]})})]})})};function d(l){if(l==null||l==="")return"0";if(typeof l=="number")return Math.round(l).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ");let r=String(l).trim();r=r.replace(/\u00A0|\u202F/g," "),r=r.replace(/%/g,"").trim();const a=r.match(/^(.*)\s(\d{2})$/);if(a){const u=a[1],g=a[2],h=u.replace(/[^0-9]/g,""),x=parseFloat(h+"."+g);if(!isNaN(x))return Math.round(x).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}if(/[.,]/.test(r)){const u=r.lastIndexOf(","),g=r.lastIndexOf("."),h=Math.max(u,g);if(h>-1){const x=r.slice(0,h),b=r.slice(h+1);if(!/\s|[.,]/.test(b)){const _=x.replace(/[^0-9]/g,""),y=b.replace(/[^0-9]/g,""),v=_+(y?"."+y:""),S=parseFloat(v);if(!isNaN(S))return Math.round(S).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}}}const p=r.replace(/[^0-9]/g,"");if(!p)return"0";const t=parseFloat(p);return isNaN(t)?"0":Math.round(t).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}function c(l,r=2){if(l==null||l==="")return"0,00 %";const a=typeof l=="string"?parseFloat(l.toString().replace(/\s/g,"").replace(",",".").replace("%","")):Number(l);return isNaN(a)?"0,00 %":a.toFixed(r).replace(".",",")+" %"}const le="/flashInfoApp/assets/ca-global-icon-BCjgHapJ.png",ae="/flashInfoApp/assets/iconNONvie-DJft6t8b.png",ce="/flashInfoApp/assets/iconVie-ZFrT48Kt.png",de="/flashInfoApp/assets/icon-cam-1-DeExYDUX.png";function N(l){if(!l)return{fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"};const r=l.toString().replace("%","").replace(",",".").trim(),a=parseFloat(r);return isNaN(a)?{fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:a<0?{background:"#ef4444",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:a<5?{background:"#fb923c",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:a>=100?{background:"#15803d",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:{background:"#22c55e",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}}function w(l){if(!l)return{color:"#64748b",fontWeight:700};const r=l.toString().replace("%","").replace(",",".").trim(),a=parseFloat(r);return isNaN(a)?{color:"#64748b",fontWeight:700}:a<0?{color:"#ef4444",fontWeight:700}:a<5?{color:"#fb923c",fontWeight:700}:a>=100?{color:"#15803d",fontWeight:700}:{color:"#22c55e",fontWeight:700}}function fe(){const[l,r]=j.useState(null),[a,p]=j.useState([]),[t,u]=j.useState(!0),[g,h]=j.useState(null),[x,b]=j.useState([]),[_,y]=j.useState(!0);j.useEffect(()=>{const f=async()=>{try{u(!0);const m=await se();p(m),h(null)}catch(m){console.error("Erreur lors du chargement des données:",m),h(m.message),p([])}finally{u(!1)}},n=async()=>{try{y(!0);const m=await k();b(Array.isArray(m)?m:[])}catch{b([])}finally{y(!1)}};f(),n()},[k]);const v=()=>{const f=new Date;return f.setDate(f.getDate()-1),f.toLocaleDateString("fr-FR")},S=()=>{const f=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],n=new Date;return n.setDate(n.getDate()-1),f[n.getMonth()]},A=()=>{const f=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],n=new Date;n.setDate(n.getDate()-1);let m=n.getMonth()-1;return m<0&&(m=11),f[m]},M=()=>{const f=new Date;f.setDate(f.getDate()-1);let n=f.getMonth()-1,m=f.getFullYear();return n<0&&(m=m-1),m},$=()=>new Date().getFullYear()-1,P=()=>new Date().getFullYear();`${v()}`,S().charAt(0).toUpperCase()+S().slice(1),`${v()}`,S().charAt(0).toUpperCase()+S().slice(1),`${$()}`,`${P()}`,`${A()}${M()}`,`${A()}${M()}`;const z=f=>a.find(n=>n.key===f),i=z("non-vie"),s=z("vie"),o=z("total");return e.jsxs("div",{style:{background:"#f8fafc",minHeight:"100vh",padding:"16px",maxWidth:"100vw",boxSizing:"border-box"},children:["            ",e.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[e.jsx("img",{src:E,alt:"MamdaMcma Logo",style:{height:"80px",width:"auto",maxWidth:"220px",objectFit:"contain",display:"block",margin:"0 auto 8px"}}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#3A3163",marginBottom:8},children:"Flash Info"}),e.jsxs("div",{style:{fontSize:18,color:"#64748b",marginBottom:8},children:["du ",v()]}),e.jsx("div",{style:{height:2,background:"linear-gradient(90deg, #1677ff 0%, #f472b6 100%)",margin:"0 auto 24px",width:320}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",gap:24,marginTop:16,width:"100%"},children:[e.jsxs(W,{className:"ca-global-card",styles:{body:{padding:24,background:"#D9D9D9",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1,width:"100%",background:"#D9D9D9"},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:22,color:"#fff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:le,alt:"CA Global Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," CA Global"]})}),onClick:()=>r(l==="total"?null:"total"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:["CA du jour ",v()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#000000"},children:t?"Chargement...":(o==null?void 0:o.ca_du_jour)!=null?d(o.ca_du_jour):d(0)})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:" MTD  "}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#000000"},children:t?"Chargement...":(o==null?void 0:o.ca_mois_actuel)!=null?d(o.ca_mois_actuel):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"Taux de remplissage"}),e.jsx("span",{style:{...N((o==null?void 0:o.taux_remplissage)!=null?c(o.taux_remplissage):""),fontSize:18},children:t?"...":(o==null?void 0:o.taux_remplissage)!=null?c(o.taux_remplissage):""})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"YTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#000000"},children:t?"Chargement...":(o==null?void 0:o.ytd_ca)!=null?d(o.ytd_ca):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...N((o==null?void 0:o.ytd_evolution)!=null?c(o.ytd_evolution):c(0)),fontSize:18},children:t?"...":(o==null?void 0:o.ytd_evolution)!=null?c(o.ytd_evolution):c(0)})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:["YTM-1 ",A()]}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#000000"},children:t?"Chargement...":(o==null?void 0:o.ca_mois_precedent)!=null?d(o.ca_mois_precedent):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...N((o==null?void 0:o.evolution_mois_precedent)!=null?c(o.evolution_mois_precedent):""),fontSize:18},children:t?"...":(o==null?void 0:o.evolution_mois_precedent)!=null?c(o.evolution_mois_precedent):""})]})]})]}),e.jsxs(W,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:22,color:"#ffffffff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:ae,alt:"Non Vie Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," Non Vie"]})}),onClick:()=>r(l==="non-vie"?null:"non-vie"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["CA du ",v()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(i==null?void 0:i.ca_du_jour)!=null?d(i.ca_du_jour):d(0)})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"MTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(i==null?void 0:i.ca_mois_actuel)!=null?d(i.ca_mois_actuel):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de remplissage"}),e.jsx("span",{style:{...w((i==null?void 0:i.taux_remplissage)!=null?c(i.taux_remplissage):""),fontSize:18},children:t?"Chargement...":(i==null?void 0:i.taux_remplissage)!=null?c(i.taux_remplissage):""})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"YTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(i==null?void 0:i.ytd_ca)!=null?d(i.ytd_ca):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...w((i==null?void 0:i.ytd_evolution)!=null?c(i.ytd_evolution):c(0)),fontSize:18},children:t?"Chargement...":(i==null?void 0:i.ytd_evolution)!=null?c(i.ytd_evolution):c(0)})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["YTM-1 ",A()]}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(i==null?void 0:i.ca_mois_precedent)!=null?d(i.ca_mois_precedent):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...w((i==null?void 0:i.evolution_mois_precedent)!=null?c(i.evolution_mois_precedent):""),fontSize:18},children:t?"...":(i==null?void 0:i.evolution_mois_precedent)!=null?c(i.evolution_mois_precedent):""})]})]})]}),e.jsxs(W,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:22,color:"#ffffffff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:ce,alt:"Vie Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," Vie"]})}),onClick:()=>r(l==="vie"?null:"vie"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["CA du ",v()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(s==null?void 0:s.ca_du_jour)!=null?d(s.ca_du_jour):d(0)})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"MTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(s==null?void 0:s.ca_mois_actuel)!=null?d(s.ca_mois_actuel):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de remplissage"}),e.jsx("span",{style:{...w((s==null?void 0:s.taux_remplissage)!=null?c(s.taux_remplissage):""),fontSize:18},children:t?"Chargement...":(s==null?void 0:s.taux_remplissage)!=null?c(s.taux_remplissage):""})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"YTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(s==null?void 0:s.ytd_ca)!=null?d(s.ytd_ca):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...w((s==null?void 0:s.ytd_evolution)!=null?c(s.ytd_evolution):c(0)),fontSize:18},children:t?"Chargement...":(s==null?void 0:s.ytd_evolution)!=null?c(s.ytd_evolution):c(0)})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["YTM-1 ",A()]}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:t?"Chargement...":(s==null?void 0:s.ca_mois_precedent)!=null?d(s.ca_mois_precedent):d(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...w((s==null?void 0:s.evolution_mois_precedent)!=null?c(s.evolution_mois_precedent):""),fontSize:18},children:t?"...":(s==null?void 0:s.evolution_mois_precedent)!=null?c(s.evolution_mois_precedent):""})]})]})]}),e.jsx(W,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:20,color:"#ffffffff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:de,alt:"CA par BU à M-1 Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," CA par BU Non Vie M-1"]})}),children:_?e.jsx("div",{style:{fontSize:16,color:"#64748b",textAlign:"center"},children:"Chargement..."}):e.jsx("div",{children:x.length===0?e.jsx("div",{style:{fontSize:14,color:"#64748b",textAlign:"center"},children:"Aucune donnée disponible"}):["MAMDA_HORS_MRC","MCMA_DIRECT","MAEM","COURTAGE"].map(f=>{const n=x.find(O=>O.bu===f);if(!n)return null;const m=d(n.ca_total_annee_courante),R=c(n.taux_total);let I=n.bu;return I==="MAMDA_HORS_MRC"&&(I="MAMDA"),I==="MCMA_DIRECT"&&(I="MCMA"),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:I}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:m})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...w(R),fontSize:18},children:R})]})]})},f)})})})]}),g&&e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",margin:"16px auto",maxWidth:"600px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#dc2626",fontWeight:600,marginBottom:"8px"},children:"⚠️ Erreur de connexion à la base de données"}),e.jsxs("div",{style:{color:"#7f1d1d",fontSize:"14px"},children:[g,". Impossible de récupérer les données depuis la base de données."]})]})]})}const{Sider:Ze}=q;function he({selectedKey:l,onSelect:r,onLogout:a}){const[p,t]=j.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"fixed top-4 left-4 z-50 bg-white rounded-lg shadow-md p-3 hover:bg-gray-50 transition-colors",onClick:()=>t(!0),children:e.jsx(V,{style:{fontSize:20,color:"#374151"}})}),e.jsx(D,{placement:"left",open:p,onClose:()=>t(!1),width:240,styles:{body:{padding:0}},headerStyle:{display:"none"},mask:!1,closable:!1,children:e.jsxs("div",{className:"flex flex-col h-full bg-white/98 backdrop-blur-sm border-r border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-blue-50/95",children:[e.jsx("span",{className:"text-xl font-bold text-blue-700",children:"Flash Info"}),e.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-blue-100 rounded-full transition-colors",children:e.jsx(ee,{style:{fontSize:16,color:"#1d4ed8"}})})]}),e.jsx("div",{className:"flex-1 py-4",children:e.jsx(K,{mode:"inline",selectedKeys:[l],onClick:({key:u})=>{r(u)},className:"border-r-0",style:{backgroundColor:"transparent",fontSize:"13px"},items:[{key:"flash-info",icon:e.jsx(te,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Flash Info"})},{key:"settings",icon:e.jsx(ne,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Settings"})}]})}),e.jsx("div",{className:"border-t border-gray-100 p-4",children:e.jsx(F,{type:"primary",danger:!0,block:!0,icon:e.jsx(ie,{}),onClick:()=>{t(!1),a&&a()},className:"font-medium",children:"Déconnexion"})})]})})]})}function ue(){const[l,r]=j.useState(!1),a=t=>{localStorage.setItem("flashinfo_token",t),r(!0)},p=()=>{localStorage.removeItem("flashinfo_token"),r(!1)};return e.jsxs("div",{className:"min-h-screen bg-background-light text-zinc-800",children:[!l&&e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(re,{onLogin:a})}),l&&e.jsxs("div",{className:"flex",children:[e.jsx(he,{onLogout:p}),e.jsx("div",{className:"flex-1 lg:ml-56",children:e.jsx(fe,{})})]})]})}U.createRoot(document.getElementById("root")).render(e.jsx(Y.StrictMode,{children:e.jsx(ue,{})}));
