import{k as K,g as h,e as P,c as y}from"./@babel/runtime-bjg2LrFx.js";import{r as a,a as tt}from"./react-DHBI0EtI.js";import{c as ie}from"./classnames-C9FZUsQl.js";import{R as xe}from"./rc-resize-observer-C3F9A2Et.js";import{y as rt,j as at,u as nt}from"./rc-util-CR6zMcjk.js";import{r as it}from"./react-dom-CAvYKTQr.js";var st=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],b=void 0;function ft(e,s){var o=e.prefixCls,f=e.invalidate,l=e.item,n=e.renderItem,u=e.responsive,S=e.responsiveDisabled,R=e.registerSize,g=e.itemKey,N=e.className,q=e.style,J=e.children,Q=e.display,d=e.order,O=e.component,k=O===void 0?"div":O,$=K(e,st),c=u&&!Q;function D(x){R(g,x)}a.useEffect(function(){return function(){D(null)}},[]);var Z=n&&l!==b?n(l,{index:d}):J,V;f||(V={opacity:c?0:1,height:c?0:b,overflowY:c?"hidden":b,order:u?d:b,pointerEvents:c?"none":b,position:c?"absolute":b});var C={};c&&(C["aria-hidden"]=!0);var M=a.createElement(k,h({className:ie(!f&&o,N),style:P(P({},V),q)},C,$,{ref:s}),Z);return u&&(M=a.createElement(xe,{onResize:function(E){var ee=E.offsetWidth;D(ee)},disabled:S},M)),M}var W=a.forwardRef(ft);W.displayName="Item";function lt(e){if(typeof MessageChannel>"u")rt(e);else{var s=new MessageChannel;s.port1.onmessage=function(){return e()},s.port2.postMessage(void 0)}}function ot(){var e=a.useRef(null),s=function(f){e.current||(e.current=[],lt(function(){it.unstable_batchedUpdates(function(){e.current.forEach(function(l){l()}),e.current=null})})),e.current.push(f)};return s}function z(e,s){var o=a.useState(s),f=y(o,2),l=f[0],n=f[1],u=at(function(S){e(function(){n(S)})});return[l,u]}var H=tt.createContext(null),ut=["component"],dt=["className"],ct=["className"],vt=function(s,o){var f=a.useContext(H);if(!f){var l=s.component,n=l===void 0?"div":l,u=K(s,ut);return a.createElement(n,h({},u,{ref:o}))}var S=f.className,R=K(f,dt),g=s.className,N=K(s,ct);return a.createElement(H.Provider,{value:null},a.createElement(W,h({ref:o,className:ie(S,g)},R,N)))},we=a.forwardRef(vt);we.displayName="RawItem";var mt=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","prefix","suffix","component","itemComponent","onVisibleChange"],Ie="responsive",be="invalidate";function yt(e){return"+ ".concat(e.length," ...")}function Rt(e,s){var o=e.prefixCls,f=o===void 0?"rc-overflow":o,l=e.data,n=l===void 0?[]:l,u=e.renderItem,S=e.renderRawItem,R=e.itemKey,g=e.itemWidth,N=g===void 0?10:g,q=e.ssr,J=e.style,Q=e.className,d=e.maxCount,O=e.renderRest,k=e.renderRawRest,$=e.prefix,c=e.suffix,D=e.component,Z=D===void 0?"div":D,V=e.itemComponent,C=e.onVisibleChange,M=K(e,mt),x=q==="full",E=ot(),ee=z(E,null),se=y(ee,2),U=se[0],ze=se[1],_=U||0,Pe=z(E,new Map),fe=y(Pe,2),le=fe[0],We=fe[1],De=z(E,0),oe=y(De,2),Me=oe[0],Ae=oe[1],Ke=z(E,0),ue=y(Ke,2),F=ue[0],Oe=ue[1],ke=z(E,0),de=y(ke,2),ce=de[0],$e=de[1],Ve=z(E,0),ve=y(Ve,2),T=ve[0],Ue=ve[1],Fe=a.useState(null),me=y(Fe,2),te=me[0],ye=me[1],Te=a.useState(null),Re=y(Te,2),j=Re[0],je=Re[1],w=a.useMemo(function(){return j===null&&x?Number.MAX_SAFE_INTEGER:j||0},[j,U]),Le=a.useState(!1),Se=y(Le,2),Ge=Se[0],Xe=Se[1],L="".concat(f,"-item"),Ee=Math.max(Me,F),G=d===Ie,v=n.length&&G,he=d===be,Be=v||typeof d=="number"&&n.length>d,p=a.useMemo(function(){var t=n;return v?U===null&&x?t=n:t=n.slice(0,Math.min(n.length,_/N)):typeof d=="number"&&(t=n.slice(0,d)),t},[n,N,U,d,v]),re=a.useMemo(function(){return v?n.slice(w+1):n.slice(p.length)},[n,p,v,w]),X=a.useCallback(function(t,r){var i;return typeof R=="function"?R(t):(i=R&&(t==null?void 0:t[R]))!==null&&i!==void 0?i:r},[R]),He=a.useCallback(u||function(t){return t},[u]);function B(t,r,i){j===t&&(r===void 0||r===te)||(je(t),i||(Xe(t<n.length-1),C==null||C(t)),r!==void 0&&ye(r))}function Ye(t,r){ze(r.clientWidth)}function _e(t,r){We(function(i){var m=new Map(i);return r===null?m.delete(t):m.set(t,r),m})}function qe(t,r){Oe(r),Ae(F)}function Je(t,r){$e(r)}function Qe(t,r){Ue(r)}function ae(t){return le.get(X(p[t],t))}nt(function(){if(_&&typeof Ee=="number"&&p){var t=ce+T,r=p.length,i=r-1;if(!r){B(0,null);return}for(var m=0;m<r;m+=1){var A=ae(m);if(x&&(A=A||0),A===void 0){B(m-1,void 0,!0);break}if(t+=A,i===0&&t<=_||m===i-1&&t+ae(i)<=_){B(i,null);break}else if(t+Ee>_){B(m-1,t-A-T+F);break}}c&&ae(0)+T>_&&ye(null)}},[_,le,F,ce,T,X,p]);var pe=Ge&&!!re.length,ge={};te!==null&&v&&(ge={position:"absolute",left:te,top:0});var I={prefixCls:L,responsive:v,component:V,invalidate:he},Ze=S?function(t,r){var i=X(t,r);return a.createElement(H.Provider,{key:i,value:P(P({},I),{},{order:r,item:t,itemKey:i,registerSize:_e,display:r<=w})},S(t,r))}:function(t,r){var i=X(t,r);return a.createElement(W,h({},I,{order:r,key:i,item:t,renderItem:He,itemKey:i,registerSize:_e,display:r<=w}))},Ne={order:pe?w:Number.MAX_SAFE_INTEGER,className:"".concat(L,"-rest"),registerSize:qe,display:pe},ne=O||yt,et=k?a.createElement(H.Provider,{value:P(P({},I),Ne)},k(re)):a.createElement(W,h({},I,Ne),typeof ne=="function"?ne(re):ne),Ce=a.createElement(Z,h({className:ie(!he&&f,Q),style:J,ref:s},M),$&&a.createElement(W,h({},I,{responsive:G,responsiveDisabled:!v,order:-1,className:"".concat(L,"-prefix"),registerSize:Je,display:!0}),$),p.map(Ze),Be?et:null,c&&a.createElement(W,h({},I,{responsive:G,responsiveDisabled:!v,order:w,className:"".concat(L,"-suffix"),registerSize:Qe,display:!0,style:ge}),c));return G?a.createElement(xe,{onResize:Ye,disabled:!v},Ce):Ce}var Y=a.forwardRef(Rt);Y.displayName="Overflow";Y.Item=we;Y.RESPONSIVE=Ie;Y.INVALIDATE=be;export{Y as F};
