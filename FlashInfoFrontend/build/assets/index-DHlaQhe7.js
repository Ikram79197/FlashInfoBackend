import{r as N,j as e,a as U}from"./react-DHBI0EtI.js";import{c as H}from"./react-dom-CAvYKTQr.js";import{F as W,A as B,B as R,S as V,I as O,C as G,a as T,L as q,D as K,M as D}from"./antd-IdE7GHGL.js";import{o as J,p as Q,l as X,m as Z,q as ee,r as te,d as se,s as ne,t as ie,u as oe}from"./@ant-design/icons-C-iGvfgj.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./rc-util-DJfO4RUt.js";import"./@babel/runtime-bjg2LrFx.js";import"./react-is-DcAOwtUU.js";import"./@ant-design/cssinjs-DsNH0EtS.js";import"./@emotion/hash-WldOFDRm.js";import"./@emotion/unitless-BWzHn38B.js";import"./stylis-D5iaQeiq.js";import"./@ant-design/cssinjs-utils-B3P3BheD.js";import"./rc-resize-observer-CmbOIhQg.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-vb8LhtBE.js";import"./rc-overflow-CRXJGAbk.js";import"./rc-menu-Cw7Ycfbe.js";import"./@rc-component/trigger-DicWPVQE.js";import"./@rc-component/portal-C1fNsaKg.js";import"./@ant-design/fast-color-DQS9xAp9.js";import"./rc-tabs-B2yJ8VQt.js";import"./rc-dropdown-Cesj57_c.js";import"./rc-checkbox-DG31C70D.js";import"./@rc-component/color-picker-Dpc1bpkh.js";import"./rc-drawer-BFp7xCAY.js";import"./rc-field-form-T6jA2d-z.js";import"./@rc-component/async-validator-B_KGBgLV.js";import"./scroll-into-view-if-needed-Bq0bK-M8.js";import"./compute-scroll-into-view-Bl8rNFhg.js";import"./rc-tooltip-CCN_d8jH.js";import"./rc-input-CxgsJPNJ.js";import"./rc-textarea-DKYRL79Z.js";import"./rc-pagination-CLBq3R4W.js";import"./rc-picker-BIf95Ow_.js";import"./@ant-design/colors-Dib51zE1.js";import"./@ant-design/icons-svg-jdGhBIRC.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))b(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const I of h.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&b(I)}).observe(document,{childList:!0,subtree:!0});function u(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function b(s){if(s.ep)return;s.ep=!0;const h=u(s);fetch(s.href,h)}})();const F="https://flashinfo.mamda-mcma.ma/flashInfo/api";function E({url:a,data:c,method:u="GET",headers:b={},timeout:s=1e4}){const h={"Content-Type":"application/json",Accept:"application/json",...b};if(!(a&&a.includes("/public/otp")))try{const d=localStorage.getItem("flashinfo_token");d&&typeof d=="string"&&d.split(".").length===3?h.Authorization=`Bearer ${d}`:d&&localStorage.removeItem("flashinfo_token")}catch{}const v={method:u,headers:h,signal:AbortSignal.timeout(s)};return c&&(u==="POST"||u==="PUT"||u==="PATCH")&&(v.body=JSON.stringify(c)),fetch(a,v).then(async d=>{if(!d.ok){const j=await d.text().catch(()=>"")||d.statusText,C=new Error(`Erreur HTTP: ${d.status} - ${j}`);throw C.status=d.status,C.body=j,C}return d.status===204?null:(d.headers.get("content-type")||"").includes("application/json")?await d.json():await d.text()}).catch(d=>{if(d.name==="AbortError"){const w=new Error("Timeout: La requête a pris trop de temps");throw w.name="AbortError",w}throw d})}function re(){return E({url:F+"/chiffre-affaires",method:"GET"})}function P(){return E({url:F+"/ca-non-vie-this-month",method:"GET"})}function le(a,c){return E({url:F+"/login",method:"POST",data:{username:a,password:c}})}function ae(a,c){return E({url:F+"/public/otp",method:"POST",data:{userLogin:a,systemName:"FlashInfo",codeValue:c}})}const ce=({onVerify:a,onBack:c,email:u,phone:b,loading:s,error:h})=>{const[I]=W.useForm(),[v,d]=N.useState(""),[w,A]=N.useState(0),j=N.useRef([]);N.useEffect(()=>{let f;return w>0&&(f=setInterval(()=>{A(t=>t-1)},1e3)),()=>clearInterval(f)},[w]);const C=(f,t)=>{var i;const y=f.replace(/[^0-9]/g,"");y.length>1||(j.current[t]&&(j.current[t].value=y),y&&t<5&&((i=j.current[t+1])==null||i.focus()))},_=(f,t)=>{var y,i,r;f.key==="Backspace"&&!f.target.value&&t>0&&((y=j.current[t-1])==null||y.focus()),f.key==="ArrowLeft"&&t>0&&((i=j.current[t-1])==null||i.focus()),f.key==="ArrowRight"&&t<5&&((r=j.current[t+1])==null||r.focus())},n=async()=>{d("");const f=j.current.map(t=>t?t.value:"").join("");if(f.length!==6){d("");return}await a(f)},x=async()=>{var f;setError(""),d("");try{await new Promise(t=>setTimeout(t,500)),A(60),j.current.forEach(t=>{t&&(t.value="")}),(f=j.current[0])==null||f.focus()}catch(t){setError((t==null?void 0:t.message)||"Erreur lors du renvoi du code.")}};return e.jsx("div",{className:"otp-verification-container",children:e.jsxs("div",{className:"otp-card",children:[e.jsxs("div",{className:"otp-left-section",children:[e.jsx("div",{className:"otp-gradient-background"}),e.jsx("div",{className:"otp-particles-effect"}),e.jsx("div",{className:"otp-left-content",children:e.jsxs("div",{className:"otp-left-inner",children:[e.jsx("div",{className:"otp-icon-container",children:e.jsx("div",{className:"otp-icon",children:e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 120 120",fill:"none",children:[e.jsx("circle",{cx:"60",cy:"60",r:"55",stroke:"#951b81",strokeWidth:"2",opacity:"0.2"}),e.jsx("path",{d:"M50 60L55 65L70 50",stroke:"#951b81",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),e.jsx("h2",{className:"otp-title",children:"Sécurité en place"}),e.jsx("p",{className:"otp-description",children:"Votre compte est protégé par une vérification en deux étapes. Veuillez entrer le code envoyé."}),e.jsxs("div",{className:"otp-features",children:[e.jsxs("div",{className:"otp-feature",children:[e.jsx("span",{className:"feature-icon",children:"✓"}),e.jsx("span",{children:"Vérification SMS"})]}),e.jsxs("div",{className:"otp-feature",children:[e.jsx("span",{className:"feature-icon",children:"✓"}),e.jsx("span",{children:"Vérification Email"})]}),e.jsxs("div",{className:"otp-feature",children:[e.jsx("span",{className:"feature-icon",children:"✓"}),e.jsx("span",{children:"Code à usage unique"})]})]})]})})]}),e.jsx("div",{className:"otp-right-section",children:e.jsxs("div",{className:"otp-form-container",children:[e.jsxs("button",{className:"otp-back-button",onClick:c,disabled:s,children:[e.jsx(J,{}),e.jsx("span",{children:"Retour"})]}),e.jsxs("div",{className:"otp-header-section",children:[e.jsx("h2",{className:"otp-welcome-title",children:"Vérification en deux étapes"}),e.jsx("p",{className:"otp-subtitle",children:"Entrez le code à 6 chiffres envoyé à:"})]}),h&&e.jsx(B,{message:h,type:"error",showIcon:!0,style:{marginBottom:"24px"},closable:!0}),v&&e.jsx(B,{message:v,type:"success",showIcon:!0,style:{marginBottom:"24px"},closable:!0,onClose:()=>d("")}),e.jsxs("div",{className:"otp-form-section",children:[e.jsx("label",{className:"otp-label",children:"Code de vérification"}),e.jsx("div",{className:"otp-input-group",children:Array.from({length:6}).map((f,t)=>e.jsx("input",{ref:y=>j.current[t]=y,type:"text",maxLength:"1",className:"otp-input",placeholder:"0",onChange:y=>C(y.target.value,t),onKeyDown:y=>_(y,t),disabled:s,autoFocus:t===0},t))}),e.jsx("p",{className:"otp-hint",children:"Entrez les 6 chiffres du code reçu"})]}),e.jsx(R,{type:"primary",block:!0,size:"large",onClick:n,loading:s,className:"otp-submit-button",disabled:s,style:{marginTop:"32px"},children:s?"Vérification...":"Vérifier le code"}),e.jsxs("div",{className:"otp-resend-section",children:[e.jsx("p",{className:"otp-resend-text",children:"Vous n'avez pas reçu le code ?"}),e.jsx(V,{direction:"vertical",style:{width:"100%"},children:e.jsx(R,{type:"link",onClick:x,disabled:w>0||s,className:"otp-resend-button",children:w>0?`Renvoyer le code (${w}s)`:"Renvoyer le code"})})]}),e.jsx("div",{className:"otp-timer-info",children:e.jsxs("p",{className:"otp-timer-text",children:[e.jsx("span",{className:"timer-icon",children:"⏱"}),"Code valide pendant 3 minutes"]})})]})})]})})},$="/flashInfoApp/assets/MamdaMcma_Logo%20instit-BC1jT0T5.png",de="/flashInfoApp/assets/coin-DihKcplc.png",ue=({onLogin:a})=>{const[c]=W.useForm(),[u,b]=N.useState(!1),[s,h]=N.useState(""),[I,v]=N.useState(!1),[d,w]=N.useState({username:"",email:"",phone:""}),A=async _=>{b(!0),h("");try{const n=_&&_.username||"",x=_&&_.password||"",f=await le(n,x),t=f&&f.data?f.data:f,y=(t==null?void 0:t.token)||(t==null?void 0:t.accessToken)||(t==null?void 0:t.jwt);if(!y){v(!0);let l=n;n&&n.includes("@")&&(l=n.split("@")[0]),w({username:l,email:t.email,phone:t.phone});return}const i=String(y),r=i.startsWith("Bearer ")?i.substring(7):i;if(!r||!r.includes("."))throw new Error("Token invalide reçu du serveur");localStorage.setItem("flashinfo_token",r),a(r)}catch(n){let x;n&&(n.status===401||n.status===403)?x="Mail ou mot de passe incorrect":x=(n==null?void 0:n.body)||(n==null?void 0:n.message)||"Erreur lors de la connexion",h(x)}finally{b(!1)}},j=async _=>{b(!0),h("");try{let n;try{n=await ae(d.username,_)}catch(t){if(t&&t.status===200&&t.response)n=t.response;else throw t}let x=(n==null?void 0:n.token)||(n==null?void 0:n.accessToken)||(n==null?void 0:n.jwt),f=null;if(n&&n.headers&&typeof n.headers.get=="function"){const t=n.headers.get("Authorization")||n.headers.get("authorization");!x&&t&&t.startsWith("Bearer ")&&(x=t.substring(7)),f=n.headers.get("userEmail")||n.headers.get("username")||null}if(!x&&n&&(n.Authorization||n.authorization)){const t=n.Authorization||n.authorization;t&&t.startsWith("Bearer ")&&(x=t.substring(7))}if(!x&&window&&window.fetch)try{const t=window.__lastOtpResponse;if(t&&t.headers){const y=t.headers.get("Authorization")||t.headers.get("authorization");y&&y.startsWith("Bearer ")&&(x=y.substring(7)),f||(f=t.headers.get("userEmail")||t.headers.get("username")||null)}}catch{}if(!x)throw new Error("Token JWT non reçu après OTP");localStorage.setItem("flashinfo_token",x),f&&localStorage.setItem("flashinfo_username",f),v(!1),a(x)}catch(n){let x=(n==null?void 0:n.body)||(n==null?void 0:n.message)||"Erreur lors de la vérification OTP";try{if(typeof x=="string"&&x.trim().startsWith("{")){const f=JSON.parse(x);f&&f.error&&(x=f.error)}}catch{}h(x)}finally{b(!1)}},C=()=>{};return I?e.jsx(ce,{onVerify:j,onBack:()=>v(!1),email:d.email,phone:d.phone,loading:u,error:s}):e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"left-section",children:[e.jsx("div",{className:"gradient-background"}),e.jsx("div",{className:"particles-effect"}),e.jsx("div",{className:"left-content",children:e.jsxs("div",{className:"left-inner",children:[e.jsxs("div",{className:"graph-container",children:[e.jsx("img",{src:de,alt:"Illustration financière avec graphiques et visualisations de données",className:"graph-image"}),e.jsx("div",{className:"graph-overlay"})]}),e.jsxs("h1",{className:"main-title",children:[e.jsx("span",{className:"title-gradient",children:"FlashInfo"}),e.jsx("br",{}),e.jsx("span",{className:"title-subtitle",children:"Dashboard"})]}),e.jsx("p",{className:"description",children:"Accédez instantanément à vos informations critiques et pilotez vos données en temps réel avec FlashInfo."}),e.jsxs("div",{className:"decorative-bars",children:[e.jsx("div",{className:"bar-1"}),e.jsx("div",{className:"bar-2"}),e.jsx("div",{className:"bar-3"})]}),e.jsx("div",{className:"info-card",children:e.jsx("div",{className:"info-row",children:e.jsx("span",{className:"info-value",children:"MAMDA • MCMA"})})})]})})]}),e.jsx("div",{className:"right-section",children:e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("img",{src:$,alt:"Logo MamdaMcma",className:"logo"}),e.jsx("h2",{className:"welcome-title",children:e.jsx("span",{className:"welcome-gradient",children:"Bienvenue"})}),e.jsx("p",{className:"subtitle",children:"Connectez-vous à votre tableau de bord FlashInfo."})]}),s&&e.jsx(B,{message:s,type:"error",showIcon:!0,style:{marginBottom:"24px"},closable:!0,onClose:()=>h("")}),e.jsx("div",{className:"form-section",children:e.jsxs(W,{form:c,name:"login",onFinish:A,onFinishFailed:C,layout:"vertical",size:"large",className:"custom-form",children:[e.jsx(W.Item,{name:"username",label:"Email",rules:[],children:e.jsx(O,{prefix:e.jsx(Q,{style:{color:"#951b81"}}),placeholder:"votre_nom_utilisateur (optionnel)",className:"custom-input"})}),e.jsx(W.Item,{name:"password",label:"Mot de passe",rules:[],children:e.jsx(O.Password,{prefix:e.jsx(ee,{style:{color:"#951b81"}}),placeholder:"•••••••• (optionnel)",iconRender:_=>_?e.jsx(X,{style:{color:"#951b81"}}):e.jsx(Z,{style:{color:"#951b81"}}),className:"custom-input"})}),e.jsxs("div",{className:"checkbox-section",children:[e.jsx(W.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(G,{className:"custom-checkbox",children:"Se souvenir de moi"})}),e.jsx("a",{href:"#",className:"forgot-link",children:"Mot de passe oublié ?"})]}),e.jsx(W.Item,{style:{marginTop:"24px"},children:e.jsx(R,{type:"primary",htmlType:"submit",loading:u,className:"custom-button",children:u?"Connexion...":"Se connecter"})})]})})]})})]})})};function m(a){if(a==null||a==="")return"0";if(typeof a=="number")return Math.round(a).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ");let c=String(a).trim();c=c.replace(/\u00A0|\u202F/g," "),c=c.replace(/%/g,"").trim();const u=c.match(/^(.*)\s(\d{2})$/);if(u){const h=u[1],I=u[2],v=h.replace(/[^0-9]/g,""),d=parseFloat(v+"."+I);if(!isNaN(d))return Math.round(d).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}if(/[.,]/.test(c)){const h=c.lastIndexOf(","),I=c.lastIndexOf("."),v=Math.max(h,I);if(v>-1){const d=c.slice(0,v),w=c.slice(v+1);if(!/\s|[.,]/.test(w)){const A=d.replace(/[^0-9]/g,""),j=w.replace(/[^0-9]/g,""),C=A+(j?"."+j:""),_=parseFloat(C);if(!isNaN(_))return Math.round(_).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}}}const b=c.replace(/[^0-9]/g,"");if(!b)return"0";const s=parseFloat(b);return isNaN(s)?"0":Math.round(s).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}function p(a,c=2){if(a==null||a==="")return"0,00 %";const u=typeof a=="string"?parseFloat(a.toString().replace(/\s/g,"").replace(",",".").replace("%","")):Number(a);return isNaN(u)?"0,00 %":u.toFixed(c).replace(".",",")+" %"}const fe="/flashInfoApp/assets/ca-global-icon-BCjgHapJ.png",he="/flashInfoApp/assets/iconNONvie-DJft6t8b.png",pe="/flashInfoApp/assets/iconVie-ZFrT48Kt.png",me="/flashInfoApp/assets/icon-cam-1-DeExYDUX.png";function k(a){if(!a)return{fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"};const c=a.toString().replace("%","").replace(",",".").trim(),u=parseFloat(c);return isNaN(u)?{fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:u<0?{background:"#ef4444",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:u<5?{background:"#fb923c",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:u>=100?{background:"#15803d",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}:{background:"#22c55e",color:"#fff",fontWeight:700,borderRadius:4,padding:"1px 6px",whiteSpace:"nowrap"}}function z(a){if(!a)return{color:"#64748b",fontWeight:700};const c=a.toString().replace("%","").replace(",",".").trim(),u=parseFloat(c);return isNaN(u)?{color:"#64748b",fontWeight:700}:u<0?{color:"#ef4444",fontWeight:700}:u<5?{color:"#fb923c",fontWeight:700}:u>=100?{color:"#15803d",fontWeight:700}:{color:"#22c55e",fontWeight:700}}function ge(){const[a,c]=N.useState(null),[u,b]=N.useState([]),[s,h]=N.useState(!0),[I,v]=N.useState(null),[d,w]=N.useState([]),[A,j]=N.useState(!0);N.useEffect(()=>{const g=async()=>{try{h(!0);const S=await re();b(S),v(null)}catch(S){console.error("Erreur lors du chargement des données:",S),v(S.message),b([])}finally{h(!1)}},o=async()=>{try{j(!0);const S=await P();w(Array.isArray(S)?S:[])}catch{w([])}finally{j(!1)}};g(),o()},[P]);const C=()=>{const g=new Date;return g.setDate(g.getDate()-1),g.toLocaleDateString("fr-FR")},_=()=>{const g=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],o=new Date;return o.setDate(o.getDate()-1),g[o.getMonth()]},n=()=>{const g=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],o=new Date;o.setDate(o.getDate()-1);let S=o.getMonth()-1;return S<0&&(S=11),g[S]},x=()=>{const g=new Date;g.setDate(g.getDate()-1);let o=g.getMonth()-1,S=g.getFullYear();return o<0&&(S=S-1),S},f=()=>new Date().getFullYear()-1,t=()=>new Date().getFullYear();`${C()}`,_().charAt(0).toUpperCase()+_().slice(1),`${C()}`,_().charAt(0).toUpperCase()+_().slice(1),`${f()}`,`${t()}`,`${n()}${x()}`,`${n()}${x()}`;const y=g=>u.find(o=>o.key===g),i=y("non-vie"),r=y("vie"),l=y("total");return e.jsxs("div",{style:{background:"#f8fafc",minHeight:"100vh",padding:"16px",maxWidth:"100vw",boxSizing:"border-box"},children:["            ",e.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[e.jsx("img",{src:$,alt:"MamdaMcma Logo",style:{height:"80px",width:"auto",maxWidth:"220px",objectFit:"contain",display:"block",margin:"0 auto 8px"}}),e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#3A3163",marginBottom:8},children:"Flash Info"}),e.jsxs("div",{style:{fontSize:18,color:"#64748b",marginBottom:8},children:["du ",C()]}),e.jsx("div",{style:{height:2,background:"linear-gradient(90deg, #1677ff 0%, #f472b6 100%)",margin:"0 auto 24px",width:320}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexWrap:"wrap",gap:24,marginTop:16,width:"100%"},children:[e.jsxs(T,{className:"ca-global-card",styles:{body:{padding:24,background:"#D9D9D9",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1,width:"100%",background:"#D9D9D9"},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:22,color:"#fff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:fe,alt:"CA Global Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," CA Global"]})}),onClick:()=>c(a==="total"?null:"total"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:["CA du jour ",C()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#000000"},children:s?"Chargement...":(l==null?void 0:l.ca_du_jour)!=null?m(l.ca_du_jour):m(0)})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:" MTD  "}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#000000"},children:s?"Chargement...":(l==null?void 0:l.ca_mois_actuel)!=null?m(l.ca_mois_actuel):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"Taux de remplissage"}),e.jsx("span",{style:{...k((l==null?void 0:l.taux_remplissage)!=null?p(l.taux_remplissage):""),fontSize:18},children:s?"...":(l==null?void 0:l.taux_remplissage)!=null?p(l.taux_remplissage):""})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"YTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#000000"},children:s?"Chargement...":(l==null?void 0:l.ytd_ca)!=null?m(l.ytd_ca):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...k((l==null?void 0:l.ytd_evolution)!=null?p(l.ytd_evolution):p(0)),fontSize:18},children:s?"...":(l==null?void 0:l.ytd_evolution)!=null?p(l.ytd_evolution):p(0)})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:["YTM-1 ",n()]}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#000000"},children:s?"Chargement...":(l==null?void 0:l.ca_mois_precedent)!=null?m(l.ca_mois_precedent):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#3A3163",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...k((l==null?void 0:l.evolution_mois_precedent)!=null?p(l.evolution_mois_precedent):""),fontSize:18},children:s?"...":(l==null?void 0:l.evolution_mois_precedent)!=null?p(l.evolution_mois_precedent):""})]})]})]}),e.jsxs(T,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:22,color:"#ffffffff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:he,alt:"Non Vie Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," Non Vie"]})}),onClick:()=>c(a==="non-vie"?null:"non-vie"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["CA du ",C()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(i==null?void 0:i.ca_du_jour)!=null?m(i.ca_du_jour):m(0)})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"MTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(i==null?void 0:i.ca_mois_actuel)!=null?m(i.ca_mois_actuel):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de remplissage"}),e.jsx("span",{style:{...z((i==null?void 0:i.taux_remplissage)!=null?p(i.taux_remplissage):""),fontSize:18},children:s?"Chargement...":(i==null?void 0:i.taux_remplissage)!=null?p(i.taux_remplissage):""})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"YTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(i==null?void 0:i.ytd_ca)!=null?m(i.ytd_ca):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...z((i==null?void 0:i.ytd_evolution)!=null?p(i.ytd_evolution):p(0)),fontSize:18},children:s?"Chargement...":(i==null?void 0:i.ytd_evolution)!=null?p(i.ytd_evolution):p(0)})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["YTM-1 ",n()]}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(i==null?void 0:i.ca_mois_precedent)!=null?m(i.ca_mois_precedent):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...z((i==null?void 0:i.evolution_mois_precedent)!=null?p(i.evolution_mois_precedent):""),fontSize:18},children:s?"...":(i==null?void 0:i.evolution_mois_precedent)!=null?p(i.evolution_mois_precedent):""})]})]})]}),e.jsxs(T,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:22,color:"#ffffffff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:pe,alt:"Vie Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," Vie"]})}),onClick:()=>c(a==="vie"?null:"vie"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["CA du ",C()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(r==null?void 0:r.ca_du_jour)!=null?m(r.ca_du_jour):m(0)})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"MTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(r==null?void 0:r.ca_mois_actuel)!=null?m(r.ca_mois_actuel):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de remplissage"}),e.jsx("span",{style:{...z((r==null?void 0:r.taux_remplissage)!=null?p(r.taux_remplissage):""),fontSize:18},children:s?"Chargement...":(r==null?void 0:r.taux_remplissage)!=null?p(r.taux_remplissage):""})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"YTD"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(r==null?void 0:r.ytd_ca)!=null?m(r.ytd_ca):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...z((r==null?void 0:r.ytd_evolution)!=null?p(r.ytd_evolution):p(0)),fontSize:18},children:s?"Chargement...":(r==null?void 0:r.ytd_evolution)!=null?p(r.ytd_evolution):p(0)})]})]}),e.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",justifyContent:"space-between",gap:16},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["YTM-1 ",n()]}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:s?"Chargement...":(r==null?void 0:r.ca_mois_precedent)!=null?m(r.ca_mois_precedent):m(0)})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...z((r==null?void 0:r.evolution_mois_precedent)!=null?p(r.evolution_mois_precedent):""),fontSize:18},children:s?"...":(r==null?void 0:r.evolution_mois_precedent)!=null?p(r.evolution_mois_precedent):""})]})]})]}),e.jsx(T,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#253338",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:e.jsxs("span",{style:{fontSize:20,color:"#ffffffff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("img",{src:me,alt:"CA par BU à M-1 Icon",style:{width:28,height:28,objectFit:"contain",verticalAlign:"middle"}})," CA par BU Non Vie M-1"]})}),children:A?e.jsx("div",{style:{fontSize:16,color:"#64748b",textAlign:"center"},children:"Chargement..."}):e.jsx("div",{children:d.length===0?e.jsx("div",{style:{fontSize:14,color:"#64748b",textAlign:"center"},children:"Aucune donnée disponible"}):["MAMDA_HORS_MRC","MCMA_DIRECT","MAEM","COURTAGE"].map(g=>{const o=d.find(Y=>Y.bu===g);if(!o)return null;const S=m(o.ca_total_annee_courante),L=p(o.taux_total);let M=o.bu;return M==="MAMDA_HORS_MRC"&&(M="MAMDA"),M==="MCMA_DIRECT"&&(M="MCMA"),e.jsx("div",{style:{marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:M}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:S})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Taux de croissance"}),e.jsx("span",{style:{...z(L),fontSize:18},children:L})]})]})},g)})})})]}),I&&e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",margin:"16px auto",maxWidth:"600px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#dc2626",fontWeight:600,marginBottom:"8px"},children:"⚠️ Erreur de connexion à la base de données"}),e.jsxs("div",{style:{color:"#7f1d1d",fontSize:"14px"},children:[I,". Impossible de récupérer les données depuis la base de données."]})]})]})}const{Sider:nt}=q;function xe({selectedKey:a,onSelect:c,onLogout:u}){const[b,s]=N.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"fixed top-4 left-4 z-50 bg-white rounded-lg shadow-md p-3 hover:bg-gray-50 transition-colors",onClick:()=>s(!0),children:e.jsx(te,{style:{fontSize:20,color:"#374151"}})}),e.jsx(K,{placement:"left",open:b,onClose:()=>s(!1),width:240,styles:{body:{padding:0}},headerStyle:{display:"none"},mask:!1,closable:!1,children:e.jsxs("div",{className:"flex flex-col h-full bg-white/98 backdrop-blur-sm border-r border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-blue-50/95",children:[e.jsx("span",{className:"text-xl font-bold text-blue-700",children:"Flash Info"}),e.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-blue-100 rounded-full transition-colors",children:e.jsx(se,{style:{fontSize:16,color:"#1d4ed8"}})})]}),e.jsx("div",{className:"flex-1 py-4",children:e.jsx(D,{mode:"inline",selectedKeys:[a],onClick:({key:h})=>{c(h)},className:"border-r-0",style:{backgroundColor:"transparent",fontSize:"13px"},items:[{key:"flash-info",icon:e.jsx(ne,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Flash Info"})},{key:"settings",icon:e.jsx(ie,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Settings"})}]})}),e.jsx("div",{className:"border-t border-gray-100 p-4",children:e.jsx(R,{type:"primary",danger:!0,block:!0,icon:e.jsx(oe,{}),onClick:()=>{s(!1),u&&u()},className:"font-medium",children:"Déconnexion"})})]})})]})}function ye(){const[a,c]=N.useState(!1),u=s=>{localStorage.setItem("flashinfo_token",s),c(!0)},b=()=>{localStorage.removeItem("flashinfo_token"),c(!1)};return e.jsxs("div",{className:"min-h-screen bg-background-light text-zinc-800",children:[!a&&e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ue,{onLogin:u})}),a&&e.jsxs("div",{className:"flex",children:[e.jsx(xe,{onLogout:b}),e.jsx("div",{className:"flex-1 lg:ml-56",children:e.jsx(ge,{})})]})]})}H.createRoot(document.getElementById("root")).render(e.jsx(U.StrictMode,{children:e.jsx(ye,{})}));
