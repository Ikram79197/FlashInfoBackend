import{c as d,f as U}from"../@babel/runtime-bjg2LrFx.js";import{r}from"../react-DHBI0EtI.js";import{r as z}from"../react-dom-CAvYKTQr.js";import{c as _,u as g,d as A,a as B,r as b,s as M,e as O}from"../rc-util-CR6zMcjk.js";var I=r.createContext(null),x=[];function W(t,e){var u=r.useState(function(){if(!_())return null;var a=document.createElement("div");return a}),s=d(u,1),n=s[0],o=r.useRef(!1),c=r.useContext(I),i=r.useState(x),m=d(i,2),f=m[0],S=m[1],p=c||(o.current?void 0:function(a){S(function(l){var y=[a].concat(U(l));return y})});function v(){n.parentElement||document.body.appendChild(n),o.current=!0}function R(){var a;(a=n.parentElement)===null||a===void 0||a.removeChild(n),o.current=!1}return g(function(){return t?c?c(v):v():R(),R},[t]),g(function(){f.length&&(f.forEach(function(a){return a()}),S(x))},[f]),[n,p]}function N(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Y="rc-util-locker-".concat(Date.now()),P=0;function j(t){var e=!!t,u=r.useState(function(){return P+=1,"".concat(Y,"_").concat(P)}),s=d(u,1),n=s[0];g(function(){if(e){var o=A(document.body).width,c=N();B(`
html body {
  overflow-y: hidden;
  `.concat(c?"width: calc(100% - ".concat(o,"px);"):"",`
}`),n)}else b(n);return function(){b(n)}},[e,n])}var F=!1;function G(t){return F}var k=function(e){return e===!1?!1:!_()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},Z=r.forwardRef(function(t,e){var u=t.open,s=t.autoLock,n=t.getContainer;t.debug;var o=t.autoDestroy,c=o===void 0?!0:o,i=t.children,m=r.useState(u),f=d(m,2),S=f[0],p=f[1],v=S||u;r.useEffect(function(){(c||u)&&p(u)},[u,c]);var R=r.useState(function(){return k(n)}),a=d(R,2),l=a[0],y=a[1];r.useEffect(function(){var E=k(n);y(E??null)});var L=W(v&&!l),$=d(L,2),w=$[0],q=$[1],h=l??w;j(s&&u&&_()&&(h===w||h===document.body));var D=null;if(i&&M(i)&&e){var Q=i;D=Q.ref}var T=O(D,e);if(!v||!_()||l===void 0)return null;var H=h===!1||G(),C=i;return e&&(C=r.cloneElement(i,{ref:T})),r.createElement(I.Provider,{value:q},H?C:z.createPortal(C,h))});export{Z as P};
