import{g as Ma,c as H,e as R,f as ca,k as Sa}from"../@babel/runtime-bjg2LrFx.js";import{P as wa}from"./portal-CKG0rBEC.js";import{c as te}from"../classnames-C9FZUsQl.js";import{R as Pa}from"../rc-resize-observer-C3F9A2Et.js";import{u as cr,f as Da,s as Na,h as ka,e as La,i as Ta,j as Yr,k as ua,l as Wa,g as la,m as za,n as $a}from"../rc-util-CR6zMcjk.js";import{r as o}from"../react-DHBI0EtI.js";import{C as ba}from"../rc-motion-DZAqVlM9.js";function Ha(r){var t=r.prefixCls,e=r.align,n=r.arrow,u=r.arrowPos,v=n||{},c=v.className,f=v.content,g=u.x,y=g===void 0?0:g,B=u.y,m=B===void 0?0:B,w=o.useRef();if(!e||!e.points)return null;var s={position:"absolute"};if(e.autoArrow!==!1){var S=e.points[0],z=e.points[1],k=S[0],D=S[1],F=z[0],L=z[1];k===F||!["t","b"].includes(k)?s.top=m:k==="t"?s.top=0:s.bottom=0,D===L||!["l","r"].includes(D)?s.left=y:D==="l"?s.left=0:s.right=0}return o.createElement("div",{ref:w,className:te("".concat(t,"-arrow"),c),style:s},f)}function Ba(r){var t=r.prefixCls,e=r.open,n=r.zIndex,u=r.mask,v=r.motion;return u?o.createElement(ba,Ma({},v,{motionAppear:!0,visible:e,removeOnLeave:!0}),function(c){var f=c.className;return o.createElement("div",{style:{zIndex:n},className:te("".concat(t,"-mask"),f)})}):null}var Fa=o.memo(function(r){var t=r.children;return t},function(r,t){return t.cache}),Ea=o.forwardRef(function(r,t){var e=r.popup,n=r.className,u=r.prefixCls,v=r.style,c=r.target,f=r.onVisibleChanged,g=r.open,y=r.keepDom,B=r.fresh,m=r.onClick,w=r.mask,s=r.arrow,S=r.arrowPos,z=r.align,k=r.motion,D=r.maskMotion,F=r.forceRender,L=r.getPopupContainer,q=r.autoDestroy,J=r.portal,l=r.zIndex,wr=r.onMouseEnter,or=r.onMouseLeave,xr=r.onPointerEnter,Pr=r.onPointerDownCapture,Rr=r.ready,fr=r.offsetX,dr=r.offsetY,ir=r.offsetR,hr=r.offsetB,W=r.onAlign,x=r.onPrepare,d=r.stretch,er=r.targetWidth,G=r.targetHeight,A=typeof e=="function"?e():e,h=g||y,br=(L==null?void 0:L.length)>0,ne=o.useState(!L||!br),Sr=H(ne,2),I=Sr[0],oe=Sr[1];if(cr(function(){!I&&br&&c&&oe(!0)},[I,br,c]),!I)return null;var ur="auto",K={left:"-1000vw",top:"-1000vh",right:ur,bottom:ur};if(Rr||!g){var Ar,Vr=z.points,Dr=z.dynamicInset||((Ar=z._experimental)===null||Ar===void 0?void 0:Ar.dynamicInset),lr=Dr&&Vr[0][1]==="r",_=Dr&&Vr[0][0]==="b";lr?(K.right=ir,K.left=ur):(K.left=fr,K.right=ur),_?(K.bottom=hr,K.top=ur):(K.top=dr,K.bottom=ur)}var V={};return d&&(d.includes("height")&&G?V.height=G:d.includes("minHeight")&&G&&(V.minHeight=G),d.includes("width")&&er?V.width=er:d.includes("minWidth")&&er&&(V.minWidth=er)),g||(V.pointerEvents="none"),o.createElement(J,{open:F||h,getContainer:L&&function(){return L(c)},autoDestroy:q},o.createElement(Ba,{prefixCls:u,open:g,zIndex:l,mask:w,motion:D}),o.createElement(Pa,{onResize:W,disabled:!g},function(mr){return o.createElement(ba,Ma({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:F,leavedClassName:"".concat(u,"-hidden")},k,{onAppearPrepare:x,onEnterPrepare:x,visible:g,onVisibleChanged:function(kr){var Q;k==null||(Q=k.onVisibleChanged)===null||Q===void 0||Q.call(k,kr),f(kr)}}),function(Nr,kr){var Q=Nr.className,jr=Nr.style,X=te(u,Q,n);return o.createElement("div",{ref:Da(mr,t,kr),className:X,style:R(R(R(R({"--arrow-x":"".concat(S.x||0,"px"),"--arrow-y":"".concat(S.y||0,"px")},K),V),jr),{},{boxSizing:"border-box",zIndex:l},v),onMouseEnter:wr,onMouseLeave:or,onPointerEnter:xr,onClick:m,onPointerDownCapture:Pr},s&&o.createElement(Ha,{prefixCls:u,arrow:s,arrowPos:S,align:z}),o.createElement(Fa,{cache:!g&&!B},A))})}))}),xa=o.forwardRef(function(r,t){var e=r.children,n=r.getTriggerDOMNode,u=Na(e),v=o.useCallback(function(f){ka(t,n?n(f):f)},[n]),c=La(v,Ta(e));return u?o.cloneElement(e,{ref:c}):e}),fa=o.createContext(null);function da(r){return r?Array.isArray(r)?r:[r]:[]}function Ra(r,t,e,n){return o.useMemo(function(){var u=da(e??t),v=da(n??t),c=new Set(u),f=new Set(v);return r&&(c.has("hover")&&(c.delete("hover"),c.add("click")),f.has("hover")&&(f.delete("hover"),f.add("click"))),[c,f]},[r,t,e,n])}function Aa(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0;return e?r[0]===t[0]:r[0]===t[0]&&r[1]===t[1]}function Va(r,t,e,n){for(var u=e.points,v=Object.keys(r),c=0;c<v.length;c+=1){var f,g=v[c];if(Aa((f=r[g])===null||f===void 0?void 0:f.points,u,n))return"".concat(t,"-placement-").concat(g)}return""}function ha(r,t,e,n){return t||(e?{motionName:"".concat(r,"-").concat(e)}:n?{motionName:n}:null)}function ye(r){return r.ownerDocument.defaultView}function va(r){for(var t=[],e=r==null?void 0:r.parentElement,n=["hidden","scroll","clip","auto"];e;){var u=ye(e).getComputedStyle(e),v=u.overflowX,c=u.overflowY,f=u.overflow;[v,c,f].some(function(g){return n.includes(g)})&&t.push(e),e=e.parentElement}return t}function ge(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(r)?t:r}function me(r){return ge(parseFloat(r),0)}function ma(r,t){var e=R({},r);return(t||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var u=ye(n).getComputedStyle(n),v=u.overflow,c=u.overflowClipMargin,f=u.borderTopWidth,g=u.borderBottomWidth,y=u.borderLeftWidth,B=u.borderRightWidth,m=n.getBoundingClientRect(),w=n.offsetHeight,s=n.clientHeight,S=n.offsetWidth,z=n.clientWidth,k=me(f),D=me(g),F=me(y),L=me(B),q=ge(Math.round(m.width/S*1e3)/1e3),J=ge(Math.round(m.height/w*1e3)/1e3),l=(S-z-F-L)*q,wr=(w-s-k-D)*J,or=k*J,xr=D*J,Pr=F*q,Rr=L*q,fr=0,dr=0;if(v==="clip"){var ir=me(c);fr=ir*q,dr=ir*J}var hr=m.x+Pr-fr,W=m.y+or-dr,x=hr+m.width+2*fr-Pr-Rr-l,d=W+m.height+2*dr-or-xr-wr;e.left=Math.max(e.left,hr),e.top=Math.max(e.top,W),e.right=Math.min(e.right,x),e.bottom=Math.min(e.bottom,d)}}),e}function ga(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e="".concat(t),n=e.match(/^(.*)\%$/);return n?r*(parseFloat(n[1])/100):parseFloat(e)}function ya(r,t){var e=t||[],n=H(e,2),u=n[0],v=n[1];return[ga(r.width,u),ga(r.height,v)]}function Ca(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[r[0],r[1]]}function ae(r,t){var e=t[0],n=t[1],u,v;return e==="t"?v=r.y:e==="b"?v=r.y+r.height:v=r.y+r.height/2,n==="l"?u=r.x:n==="r"?u=r.x+r.width:u=r.x+r.width/2,{x:u,y:v}}function Er(r,t){var e={t:"b",b:"t",l:"r",r:"l"};return r.map(function(n,u){return u===t?e[n]||"c":n}).join("")}function ja(r,t,e,n,u,v,c){var f=o.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:u[n]||{}}),g=H(f,2),y=g[0],B=g[1],m=o.useRef(0),w=o.useMemo(function(){return t?va(t):[]},[t]),s=o.useRef({}),S=function(){s.current={}};r||S();var z=Yr(function(){if(t&&e&&r){let rr=function(de,Mr){var Fr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ie,he=h.x+de,Re=h.y+Mr,ta=he+_,na=Re+lr,oa=Math.max(he,Fr.left),a=Math.max(Re,Fr.top),i=Math.min(ta,Fr.right),P=Math.min(na,Fr.bottom);return Math.max(0,(i-oa)*(P-a))},ee=function(){Wr=h.y+b,zr=Wr+lr,Kr=h.x+M,Cr=Kr+_};var F,L,q,J,l=t,wr=l.ownerDocument,or=ye(l),xr=or.getComputedStyle(l),Pr=xr.position,Rr=l.style.left,fr=l.style.top,dr=l.style.right,ir=l.style.bottom,hr=l.style.overflow,W=R(R({},u[n]),v),x=wr.createElement("div");(F=l.parentElement)===null||F===void 0||F.appendChild(x),x.style.left="".concat(l.offsetLeft,"px"),x.style.top="".concat(l.offsetTop,"px"),x.style.position=Pr,x.style.height="".concat(l.offsetHeight,"px"),x.style.width="".concat(l.offsetWidth,"px"),l.style.left="0",l.style.top="0",l.style.right="auto",l.style.bottom="auto",l.style.overflow="hidden";var d;if(Array.isArray(e))d={x:e[0],y:e[1],width:0,height:0};else{var er,G,A=e.getBoundingClientRect();A.x=(er=A.x)!==null&&er!==void 0?er:A.left,A.y=(G=A.y)!==null&&G!==void 0?G:A.top,d={x:A.x,y:A.y,width:A.width,height:A.height}}var h=l.getBoundingClientRect(),br=or.getComputedStyle(l),ne=br.height,Sr=br.width;h.x=(L=h.x)!==null&&L!==void 0?L:h.left,h.y=(q=h.y)!==null&&q!==void 0?q:h.top;var I=wr.documentElement,oe=I.clientWidth,ur=I.clientHeight,K=I.scrollWidth,Ar=I.scrollHeight,Vr=I.scrollTop,Dr=I.scrollLeft,lr=h.height,_=h.width,V=d.height,mr=d.width,Nr={left:0,top:0,right:oe,bottom:ur},kr={left:-Dr,top:-Vr,right:K-Dr,bottom:Ar-Vr},Q=W.htmlRegion,jr="visible",X="visibleFirst";Q!=="scroll"&&Q!==X&&(Q=jr);var Ur=Q===X,je=ma(kr,w),C=ma(Nr,w),ie=Q===jr?C:je,$=Ur?C:ie;l.style.left="auto",l.style.top="auto",l.style.right="0",l.style.bottom="0";var Ce=l.getBoundingClientRect();l.style.left=Rr,l.style.top=fr,l.style.right=dr,l.style.bottom=ir,l.style.overflow=hr,(J=l.parentElement)===null||J===void 0||J.removeChild(x);var gr=ge(Math.round(_/parseFloat(Sr)*1e3)/1e3),Lr=ge(Math.round(lr/parseFloat(ne)*1e3)/1e3);if(gr===0||Lr===0||ua(e)&&!Wa(e))return;var Ue=W.offset,Me=W.targetOffset,vr=ya(h,Ue),we=H(vr,2),Y=we[0],ar=we[1],Or=ya(d,Me),Z=H(Or,2),Tr=Z[0],qe=Z[1];d.x-=Tr,d.y-=qe;var Je=W.points||[],Pe=H(Je,2),Ge=Pe[0],be=Pe[1],yr=Ca(be),j=Ca(Ge),E=ae(d,yr),Se=ae(h,j),O=R({},W),M=E.x-Se.x+Y,b=E.y-Se.y+ar,tr=rr(M,b),qr=rr(M,b,C),p=ae(d,["t","l"]),De=ae(h,["t","l"]),ue=ae(d,["b","r"]),Jr=ae(h,["b","r"]),Gr=W.overflow||{},Ke=Gr.adjustX,Ne=Gr.adjustY,pr=Gr.shiftX,le=Gr.shiftY,ke=function(Mr){return typeof Mr=="boolean"?Mr:Mr>=0},Wr,zr,Kr,Cr;ee();var Le=ke(Ne),U=j[0]===yr[0];if(Le&&j[0]==="t"&&(zr>$.bottom||s.current.bt)){var Qr=b;U?Qr-=lr-V:Qr=p.y-Jr.y-ar;var Te=rr(M,Qr),Qe=rr(M,Qr,C);Te>tr||Te===tr&&(!Ur||Qe>=qr)?(s.current.bt=!0,b=Qr,ar=-ar,O.points=[Er(j,0),Er(yr,0)]):s.current.bt=!1}if(Le&&j[0]==="b"&&(Wr<$.top||s.current.tb)){var Zr=b;U?Zr+=lr-V:Zr=ue.y-De.y-ar;var We=rr(M,Zr),Ze=rr(M,Zr,C);We>tr||We===tr&&(!Ur||Ze>=qr)?(s.current.tb=!0,b=Zr,ar=-ar,O.points=[Er(j,0),Er(yr,0)]):s.current.tb=!1}var ze=ke(Ke),$e=j[1]===yr[1];if(ze&&j[1]==="l"&&(Cr>$.right||s.current.rl)){var Ir=M;$e?Ir-=_-mr:Ir=p.x-Jr.x-Y;var _r=rr(Ir,b),ve=rr(Ir,b,C);_r>tr||_r===tr&&(!Ur||ve>=qr)?(s.current.rl=!0,M=Ir,Y=-Y,O.points=[Er(j,1),Er(yr,1)]):s.current.rl=!1}if(ze&&j[1]==="r"&&(Kr<$.left||s.current.lr)){var Xr=M;$e?Xr+=_-mr:Xr=ue.x-De.x-Y;var se=rr(Xr,b),re=rr(Xr,b,C);se>tr||se===tr&&(!Ur||re>=qr)?(s.current.lr=!0,M=Xr,Y=-Y,O.points=[Er(j,1),Er(yr,1)]):s.current.lr=!1}ee();var nr=pr===!0?0:pr;typeof nr=="number"&&(Kr<C.left&&(M-=Kr-C.left-Y,d.x+mr<C.left+nr&&(M+=d.x-C.left+mr-nr)),Cr>C.right&&(M-=Cr-C.right-Y,d.x>C.right-nr&&(M+=d.x-C.right+nr)));var $r=le===!0?0:le;typeof $r=="number"&&(Wr<C.top&&(b-=Wr-C.top-ar,d.y+V<C.top+$r&&(b+=d.y-C.top+V-$r)),zr>C.bottom&&(b-=zr-C.bottom-ar,d.y>C.bottom-$r&&(b+=d.y-C.bottom+$r)));var Hr=h.x+M,Br=Hr+_,ce=h.y+b,Ie=ce+lr,He=d.x,Be=He+mr,Fe=d.y,_e=Fe+V,Xe=Math.max(Hr,He),Ee=Math.min(Br,Be),Ye=(Xe+Ee)/2,Oe=Ye-Hr,xe=Math.max(ce,Fe),pe=Math.min(Ie,_e),ra=(xe+pe)/2,ea=ra-ce;c==null||c(t,O);var sr=Ce.right-h.x-(M+h.width),fe=Ce.bottom-h.y-(b+h.height);gr===1&&(M=Math.round(M),sr=Math.round(sr)),Lr===1&&(b=Math.round(b),fe=Math.round(fe));var aa={ready:!0,offsetX:M/gr,offsetY:b/Lr,offsetR:sr/gr,offsetB:fe/Lr,arrowX:Oe/gr,arrowY:ea/Lr,scaleX:gr,scaleY:Lr,align:O};B(aa)}}),k=function(){m.current+=1;var L=m.current;Promise.resolve().then(function(){m.current===L&&z()})},D=function(){B(function(L){return R(R({},L),{},{ready:!1})})};return cr(D,[n]),cr(function(){r||D()},[r]),[y.ready,y.offsetX,y.offsetY,y.offsetR,y.offsetB,y.arrowX,y.arrowY,y.scaleX,y.scaleY,y.align,k]}function Ua(r,t,e,n,u){cr(function(){if(r&&t&&e){let m=function(){n(),u()};var v=t,c=e,f=va(v),g=va(c),y=ye(c),B=new Set([y].concat(ca(f),ca(g)));return B.forEach(function(w){w.addEventListener("scroll",m,{passive:!0})}),y.addEventListener("resize",m,{passive:!0}),n(),function(){B.forEach(function(w){w.removeEventListener("scroll",m),y.removeEventListener("resize",m)})}}},[r,t,e])}function qa(r,t,e,n,u,v,c,f){var g=o.useRef(r);g.current=r;var y=o.useRef(!1);o.useEffect(function(){if(t&&n&&(!u||v)){var m=function(){y.current=!1},w=function(k){var D;g.current&&!c(((D=k.composedPath)===null||D===void 0||(D=D.call(k))===null||D===void 0?void 0:D[0])||k.target)&&!y.current&&f(!1)},s=ye(n);s.addEventListener("pointerdown",m,!0),s.addEventListener("mousedown",w,!0),s.addEventListener("contextmenu",w,!0);var S=la(e);return S&&(S.addEventListener("mousedown",w,!0),S.addEventListener("contextmenu",w,!0)),function(){s.removeEventListener("pointerdown",m,!0),s.removeEventListener("mousedown",w,!0),s.removeEventListener("contextmenu",w,!0),S&&(S.removeEventListener("mousedown",w,!0),S.removeEventListener("contextmenu",w,!0))}}},[t,e,n,u,v]);function B(){y.current=!0}return B}var Ja=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function Ga(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wa,t=o.forwardRef(function(e,n){var u=e.prefixCls,v=u===void 0?"rc-trigger-popup":u,c=e.children,f=e.action,g=f===void 0?"hover":f,y=e.showAction,B=e.hideAction,m=e.popupVisible,w=e.defaultPopupVisible,s=e.onPopupVisibleChange,S=e.afterPopupVisibleChange,z=e.mouseEnterDelay,k=e.mouseLeaveDelay,D=k===void 0?.1:k,F=e.focusDelay,L=e.blurDelay,q=e.mask,J=e.maskClosable,l=J===void 0?!0:J,wr=e.getPopupContainer,or=e.forceRender,xr=e.autoDestroy,Pr=e.destroyPopupOnHide,Rr=e.popup,fr=e.popupClassName,dr=e.popupStyle,ir=e.popupPlacement,hr=e.builtinPlacements,W=hr===void 0?{}:hr,x=e.popupAlign,d=e.zIndex,er=e.stretch,G=e.getPopupClassNameFromAlign,A=e.fresh,h=e.alignPoint,br=e.onPopupClick,ne=e.onPopupAlign,Sr=e.arrow,I=e.popupMotion,oe=e.maskMotion,ur=e.popupTransitionName,K=e.popupAnimation,Ar=e.maskTransitionName,Vr=e.maskAnimation,Dr=e.className,lr=e.getTriggerDOMNode,_=Sa(e,Ja),V=xr||Pr||!1,mr=o.useState(!1),Nr=H(mr,2),kr=Nr[0],Q=Nr[1];cr(function(){Q(za())},[]);var jr=o.useRef({}),X=o.useContext(fa),Ur=o.useMemo(function(){return{registerSubPopup:function(i,P){jr.current[i]=P,X==null||X.registerSubPopup(i,P)}}},[X]),je=$a(),C=o.useState(null),ie=H(C,2),$=ie[0],Ce=ie[1],gr=o.useRef(null),Lr=Yr(function(a){gr.current=a,ua(a)&&$!==a&&Ce(a),X==null||X.registerSubPopup(je,a)}),Ue=o.useState(null),Me=H(Ue,2),vr=Me[0],we=Me[1],Y=o.useRef(null),ar=Yr(function(a){ua(a)&&vr!==a&&(we(a),Y.current=a)}),Or=o.Children.only(c),Z=(Or==null?void 0:Or.props)||{},Tr={},qe=Yr(function(a){var i,P,T=vr;return(T==null?void 0:T.contains(a))||((i=la(T))===null||i===void 0?void 0:i.host)===a||a===T||($==null?void 0:$.contains(a))||((P=la($))===null||P===void 0?void 0:P.host)===a||a===$||Object.values(jr.current).some(function(N){return(N==null?void 0:N.contains(a))||a===N})}),Je=ha(v,I,K,ur),Pe=ha(v,oe,Vr,Ar),Ge=o.useState(w||!1),be=H(Ge,2),yr=be[0],j=be[1],E=m??yr,Se=Yr(function(a){m===void 0&&j(a)});cr(function(){j(m||!1)},[m]);var O=o.useRef(E);O.current=E;var M=o.useRef([]);M.current=[];var b=Yr(function(a){var i;Se(a),((i=M.current[M.current.length-1])!==null&&i!==void 0?i:E)!==a&&(M.current.push(a),s==null||s(a))}),tr=o.useRef(),qr=function(){clearTimeout(tr.current)},p=function(i){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;qr(),P===0?b(i):tr.current=setTimeout(function(){b(i)},P*1e3)};o.useEffect(function(){return qr},[]);var De=o.useState(!1),ue=H(De,2),Jr=ue[0],Gr=ue[1];cr(function(a){(!a||E)&&Gr(!0)},[E]);var Ke=o.useState(null),Ne=H(Ke,2),pr=Ne[0],le=Ne[1],ke=o.useState(null),Wr=H(ke,2),zr=Wr[0],Kr=Wr[1],Cr=function(i){Kr([i.clientX,i.clientY])},Le=ja(E,$,h&&zr!==null?zr:vr,ir,W,x,ne),U=H(Le,11),Qr=U[0],Te=U[1],Qe=U[2],Zr=U[3],We=U[4],Ze=U[5],ze=U[6],$e=U[7],Ir=U[8],_r=U[9],ve=U[10],Xr=Ra(kr,g,y,B),se=H(Xr,2),re=se[0],nr=se[1],$r=re.has("click"),Hr=nr.has("click")||nr.has("contextMenu"),Br=Yr(function(){Jr||ve()}),ce=function(){O.current&&h&&Hr&&p(!1)};Ua(E,vr,$,Br,ce),cr(function(){Br()},[zr,ir]),cr(function(){E&&!(W!=null&&W[ir])&&Br()},[JSON.stringify(x)]);var Ie=o.useMemo(function(){var a=Va(W,v,_r,h);return te(a,G==null?void 0:G(_r))},[_r,G,W,v,h]);o.useImperativeHandle(n,function(){return{nativeElement:Y.current,popupElement:gr.current,forceAlign:Br}});var He=o.useState(0),Be=H(He,2),Fe=Be[0],_e=Be[1],Xe=o.useState(0),Ee=H(Xe,2),Ye=Ee[0],Oe=Ee[1],xe=function(){if(er&&vr){var i=vr.getBoundingClientRect();_e(i.width),Oe(i.height)}},pe=function(){xe(),Br()},ra=function(i){Gr(!1),ve(),S==null||S(i)},ea=function(){return new Promise(function(i){xe(),le(function(){return i})})};cr(function(){pr&&(ve(),pr(),le(null))},[pr]);function sr(a,i,P,T){Tr[a]=function(N){var Ae;T==null||T(N),p(i,P);for(var ia=arguments.length,sa=new Array(ia>1?ia-1:0),Ve=1;Ve<ia;Ve++)sa[Ve-1]=arguments[Ve];(Ae=Z[a])===null||Ae===void 0||Ae.call.apply(Ae,[Z,N].concat(sa))}}($r||Hr)&&(Tr.onClick=function(a){var i;O.current&&Hr?p(!1):!O.current&&$r&&(Cr(a),p(!0));for(var P=arguments.length,T=new Array(P>1?P-1:0),N=1;N<P;N++)T[N-1]=arguments[N];(i=Z.onClick)===null||i===void 0||i.call.apply(i,[Z,a].concat(T))});var fe=qa(E,Hr,vr,$,q,l,qe,p),aa=re.has("hover"),rr=nr.has("hover"),ee,de;aa&&(sr("onMouseEnter",!0,z,function(a){Cr(a)}),sr("onPointerEnter",!0,z,function(a){Cr(a)}),ee=function(i){(E||Jr)&&$!==null&&$!==void 0&&$.contains(i.target)&&p(!0,z)},h&&(Tr.onMouseMove=function(a){var i;(i=Z.onMouseMove)===null||i===void 0||i.call(Z,a)})),rr&&(sr("onMouseLeave",!1,D),sr("onPointerLeave",!1,D),de=function(){p(!1,D)}),re.has("focus")&&sr("onFocus",!0,F),nr.has("focus")&&sr("onBlur",!1,L),re.has("contextMenu")&&(Tr.onContextMenu=function(a){var i;O.current&&nr.has("contextMenu")?p(!1):(Cr(a),p(!0)),a.preventDefault();for(var P=arguments.length,T=new Array(P>1?P-1:0),N=1;N<P;N++)T[N-1]=arguments[N];(i=Z.onContextMenu)===null||i===void 0||i.call.apply(i,[Z,a].concat(T))}),Dr&&(Tr.className=te(Z.className,Dr));var Mr=o.useRef(!1);Mr.current||(Mr.current=or||E||Jr);var Fr=R(R({},Z),Tr),he={},Re=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Re.forEach(function(a){_[a]&&(he[a]=function(){for(var i,P=arguments.length,T=new Array(P),N=0;N<P;N++)T[N]=arguments[N];(i=Fr[a])===null||i===void 0||i.call.apply(i,[Fr].concat(T)),_[a].apply(_,T)})});var ta=o.cloneElement(Or,R(R({},Fr),he)),na={x:Ze,y:ze},oa=Sr?R({},Sr!==!0?Sr:{}):null;return o.createElement(o.Fragment,null,o.createElement(Pa,{disabled:!E,ref:ar,onResize:pe},o.createElement(xa,{getTriggerDOMNode:lr},ta)),Mr.current&&o.createElement(fa.Provider,{value:Ur},o.createElement(Ea,{portal:r,ref:Lr,prefixCls:v,popup:Rr,className:te(fr,Ie),style:dr,target:vr,onMouseEnter:ee,onMouseLeave:de,onPointerEnter:ee,zIndex:d,open:E,keepDom:Jr,fresh:A,onClick:br,onPointerDownCapture:fe,mask:q,motion:Je,maskMotion:Pe,onVisibleChanged:ra,onPrepare:ea,forceRender:or,autoDestroy:V,getPopupContainer:wr,align:_r,arrow:oa,arrowPos:na,ready:Qr,offsetX:Te,offsetY:Qe,offsetR:Zr,offsetB:We,onAlign:Br,stretch:er,targetWidth:Fe/$e,targetHeight:Ye/Ir})))});return t}const Oa=Ga(wa);export{Oa as T};
