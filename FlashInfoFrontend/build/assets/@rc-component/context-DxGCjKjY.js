import{c as R,g as x}from"../@babel/runtime-DcA5D6RU.js";import{u as C,d as I,i as S,s as b}from"../rc-util-JLx9b6Sx.js";import{r as e}from"../react-DHBI0EtI.js";import{r as p}from"../react-dom-CAvYKTQr.js";function y(o){var r=e.createContext(void 0),l=function(u){var n=u.value,i=u.children,a=e.useRef(n);a.current=n;var d=e.useState(function(){return{getValue:function(){return a.current},listeners:new Set}}),f=R(d,1),c=f[0];return C(function(){p.unstable_batchedUpdates(function(){c.listeners.forEach(function(t){t(n)})})},[n]),e.createElement(r.Provider,{value:c},i)};return{Context:r,Provider:l,defaultValue:o}}function A(o,r){var l=I(typeof r=="function"?r:function(t){if(r===void 0)return t;if(!Array.isArray(r))return t[r];var s={};return r.forEach(function(v){s[v]=t[v]}),s}),m=e.useContext(o==null?void 0:o.Context),u=m||{},n=u.listeners,i=u.getValue,a=e.useRef();a.current=l(m?i():o==null?void 0:o.defaultValue);var d=e.useState({}),f=R(d,2),c=f[1];return C(function(){if(!m)return;function t(s){var v=l(s);S(a.current,v,!0)||c({})}return n.add(t),function(){n.delete(t)}},[m]),a.current}function $(){var o=e.createContext(null);function r(){return e.useContext(o)}function l(u,n){var i=b(u),a=function(f,c){var t=i?{ref:c}:{},s=e.useRef(0),v=e.useRef(f),E=r();return E!==null?e.createElement(u,x({},f,t)):((!n||n(v.current,f))&&(s.current+=1),v.current=f,e.createElement(o.Provider,{value:s.current},e.createElement(u,x({},f,t))))};return i?e.forwardRef(a):a}function m(u,n){var i=b(u),a=function(f,c){var t=i?{ref:c}:{};return r(),e.createElement(u,x({},f,t))};return i?e.memo(e.forwardRef(a),n):e.memo(a,n)}return{makeImmutable:l,responseImmutable:m,useImmutableMark:r}}export{y as a,$ as c,A as u};
