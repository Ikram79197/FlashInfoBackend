import{r as y,j as e,a as me}from"./react-DHBI0EtI.js";import{c as be}from"./react-dom-CAvYKTQr.js";import{L as he,D as ye,M as je,F as D,C as V,a as _,b as G,A as ve,I as ce,c as Ne,B as Ce}from"./antd-0_FpuDJA.js";import{C as Ae,d as ke,D as pe,E as we,F as Te,G as Ie,H as Se,o as De,p as _e,J as ze}from"./@ant-design/icons-VF0vUhFs.js";import{R as Re,C as Me,a as Ee,X as Pe,Y as xe,T as Fe,L as $e,B as Ve,b as We}from"./recharts-B6jt5AH0.js";import"./classnames-C9FZUsQl.js";import"./scheduler-DYLXRpC5.js";import"./rc-util-JLx9b6Sx.js";import"./@babel/runtime-DcA5D6RU.js";import"./react-is-DcAOwtUU.js";import"./@ant-design/cssinjs-Bjby5CA0.js";import"./@emotion/hash-WldOFDRm.js";import"./@emotion/unitless-BWzHn38B.js";import"./stylis-D5iaQeiq.js";import"./@ant-design/cssinjs-utils-CY5tbW7B.js";import"./rc-resize-observer-DDTICJuD.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-fj9KWNR5.js";import"./rc-collapse-DZOSxSRz.js";import"./rc-overflow-C1a844o0.js";import"./rc-tabs-DrYtd495.js";import"./rc-dropdown-BZCjMmCY.js";import"./@rc-component/trigger-Bt0gfeB-.js";import"./@rc-component/portal-C4UMk4Ch.js";import"./rc-menu-BDVSNE9u.js";import"./rc-select--ca_zEkx.js";import"./rc-virtual-list-DjaLeOVW.js";import"./@rc-component/color-picker-BCpEcMH0.js";import"./@ant-design/fast-color-BYak4d6v.js";import"./rc-drawer-jI1GRIZQ.js";import"./rc-field-form-CznT9ilL.js";import"./@rc-component/async-validator-Bnjp9r57.js";import"./rc-textarea-BhIc_GA1.js";import"./rc-input-Bh4P3Cpu.js";import"./@ant-design/colors-BXBWiNjp.js";import"./rc-table-DdS-MlEh.js";import"./@rc-component/context-DxGCjKjY.js";import"./rc-tree-a1Eqch2j.js";import"./rc-checkbox-Cv6_NlnO.js";import"./rc-pagination-XxLfmaWp.js";import"./rc-picker-CbOgcjwQ.js";import"./rc-tooltip-C85Ko7L1.js";import"./scroll-into-view-if-needed-Bq0bK-M8.js";import"./compute-scroll-into-view-Bl8rNFhg.js";import"./throttle-debounce-CUWDS_la.js";import"./@ant-design/icons-svg-Og7n3sKu.js";import"./clsx-B-dksMZM.js";import"./es-toolkit-JCa2emqN.js";import"./reselect-CiXCCDx7.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-nwul2LtV.js";import"./d3-path-CimkQT29.js";import"./@reduxjs/toolkit-lx7b3Z4a.js";import"./redux-BXkGT1VS.js";import"./redux-thunk-ClJT1hhx.js";import"./react-redux-CqHRqfX2.js";import"./use-sync-external-store-DtfKHy5D.js";import"./immer-BZTISVQZ.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-DWN6IjSv.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))p(d);new MutationObserver(d=>{for(const x of d)if(x.type==="childList")for(const A of x.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&p(A)}).observe(document,{childList:!0,subtree:!0});function i(d){const x={};return d.integrity&&(x.integrity=d.integrity),d.referrerPolicy&&(x.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?x.credentials="include":d.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function p(d){if(d.ep)return;d.ep=!0;const x=i(d);fetch(d.href,x)}})();const{Sider:Ca}=he;function Le({selectedKey:n,onSelect:l}){const[i,p]=y.useState(!0);return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"fixed top-4 left-4 z-50 bg-white rounded-lg shadow-md p-3 hover:bg-gray-50 transition-colors",onClick:()=>p(!0),children:e.jsx(Ae,{style:{fontSize:20,color:"#374151"}})}),e.jsx(ye,{placement:"left",open:i,onClose:()=>p(!1),width:240,styles:{body:{padding:0}},headerStyle:{display:"none"},mask:!1,closable:!1,children:e.jsxs("div",{className:"flex flex-col h-full bg-white/98 backdrop-blur-sm border-r border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 bg-blue-50/95",children:[e.jsx("span",{className:"text-xl font-bold text-blue-700",children:"Flash Info"}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-blue-100 rounded-full transition-colors",children:e.jsx(ke,{style:{fontSize:16,color:"#1d4ed8"}})})]}),e.jsx("div",{className:"flex-1 py-4",children:e.jsx(je,{mode:"inline",selectedKeys:[n],onClick:({key:d})=>{l(d)},className:"border-r-0",style:{backgroundColor:"transparent",fontSize:"13px"},items:[{key:"flash-info",icon:e.jsx(pe,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Flash Info"})},{key:"syntheseGlobale",icon:e.jsx(we,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Synthèse globale"})},{key:"dashboard",icon:e.jsx(Te,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Dashboard"})},{key:"settings",icon:e.jsx(Ie,{style:{color:"#3b82f6"}}),label:e.jsx("span",{className:"font-medium",children:"Settings"})}]})})]})})]})}const z="https://flashinfo.mamda-mcma.ma/flashInfo/api";function R({url:n,data:l,method:i="GET",headers:p={},timeout:d=1e4}){const x={"Content-Type":"application/json",Accept:"application/json",...p};try{const m=localStorage.getItem("flashinfo_token");m&&(x.Authorization=`Bearer ${m}`)}catch{}const A={method:i,headers:x,signal:AbortSignal.timeout(d)};return l&&(i==="POST"||i==="PUT"||i==="PATCH")&&(A.body=JSON.stringify(l)),fetch(n,A).then(async m=>{if(!m.ok){const w=await m.text().catch(()=>"")||m.statusText,k=new Error(`Erreur HTTP: ${m.status} - ${w}`);throw k.status=m.status,k.body=w,k}return m.status===204?null:(m.headers.get("content-type")||"").includes("application/json")?await m.json():await m.text()}).catch(m=>{if(m.name==="AbortError"){const j=new Error("Timeout: La requête a pris trop de temps");throw j.name="AbortError",j}throw m})}function fe(){return R({url:z+"/chiffre-affaires",method:"GET"})}function Be(){return R({url:z+"/synthese-vie",method:"GET"})}function Oe(){return R({url:z+"/synthese-non-vie",method:"GET"})}function Ue(){return R({url:z+"/ca-vie-mensuel",method:"GET"})}function Ke(){return R({url:z+"/ca-non-vie-mensuel",method:"GET"})}function Ye(){return R({url:z+"/emission500kdhs",method:"GET"})}function Ge(){return R({url:z+"/ca-non-vie-this-month",method:"GET"})}function Je(){return R({url:z+"/vie-this-month",method:"GET"})}function He(){return R({url:z+"/ca-non-vie-exercice",method:"GET"})}function qe(){return R({url:z+"/ca-vie-exercice",method:"GET"})}function Xe(n,l){return R({url:z+"/auth/login",method:"POST",data:{username:n,password:l}})}function s(n){if(n==null||n==="")return"0";if(typeof n=="number")return Math.round(n).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ");let l=String(n).trim();l=l.replace(/\u00A0|\u202F/g," "),l=l.replace(/%/g,"").trim();const i=l.match(/^(.*)\s(\d{2})$/);if(i){const x=i[1],A=i[2],m=x.replace(/[^0-9]/g,""),j=parseFloat(m+"."+A);if(!isNaN(j))return Math.round(j).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}if(/[.,]/.test(l)){const x=l.lastIndexOf(","),A=l.lastIndexOf("."),m=Math.max(x,A);if(m>-1){const j=l.slice(0,m),N=l.slice(m+1);if(!/\s|[.,]/.test(N)){const w=j.replace(/[^0-9]/g,""),k=N.replace(/[^0-9]/g,""),g=w+(k?"."+k:""),O=parseFloat(g);if(!isNaN(O))return Math.round(O).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}}}const p=l.replace(/[^0-9]/g,"");if(!p)return"0";const d=parseFloat(p);return isNaN(d)?"0":Math.round(d).toLocaleString("fr-FR").replace(/\u202F|\u00A0|,/g," ")}function o(n,l=2){if(n==null||n==="")return"0,00 %";const i=typeof n=="string"?parseFloat(n.toString().replace(/\s/g,"").replace(",",".").replace("%","")):Number(n);return isNaN(i)?"0,00 %":i.toFixed(l).replace(".",",")+" %"}function Qe(n){if(n===""||n==null)return"evo-gray";try{let l=n.toString().trim();l=l.replace(/\s+/g,""),l=l.replace("%",""),l=l.replace(",",".");const i=parseFloat(l);return isNaN(i)?"evo-gray":i<0?"evo-red":i<5?"evo-orange":i<100?"evo-green":"evo-green-dark"}catch(l){return console.error("getEvolutionClass error",l,n),"evo-gray"}}function f({value:n}){const l=Qe(n);return me.createElement("span",{className:`evo-badge ${l}`},n??"")}function B(){const n=new Date;n.setDate(n.getDate()-1);const l=String(n.getDate()).padStart(2,"0"),i=String(n.getMonth()+1).padStart(2,"0"),p=n.getFullYear();return`${l}/${i}/${p}`}function Z(){const n=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],l=new Date;return l.setDate(l.getDate()-1),n[l.getMonth()]}function S(){return new Date().getFullYear()}function E(){return new Date().getFullYear()-1}function ue(){const n=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],l=new Date;l.setDate(l.getDate()-1);let i=l.getMonth(),p=l.getFullYear();return i===0?(i=11,p=p-1):i=i-1,`${n[i]} ${p}`}function Ze(){const[n,l]=y.useState([]),[i,p]=y.useState([]),[d,x]=y.useState([]),[A,m]=y.useState([]),[j,N]=y.useState([]),[w,k]=y.useState([]),[g,O]=y.useState([]),[ee,U]=y.useState([]),[C,v]=y.useState([]),[b,te]=y.useState([]),[u,r]=y.useState(!0);y.useEffect(()=>{const t=async()=>{try{const[h,M,c,I,W,H,q,K,X,Y]=await Promise.all([fe(),Be(),Oe(),Ye(),Ke(),Ue(),Ge(),Je(),He(),qe()]);console.log("caVieThisMonth:",K),console.log("caVieExercice :",Y),console.log("allChiffreAffaires:",h),te(Array.isArray(h)?h:[]),l(Array.isArray(M)?M:[]),p(Array.isArray(c)?c:[]),x(Array.isArray(I)?I:[]),m(Array.isArray(W)?W:[]),N(Array.isArray(H)?H:[]),k(Array.isArray(q)?q:[]),O(Array.isArray(K)?K:[]),U(Array.isArray(X)?X:[]),v(Array.isArray(Y)?Y:[])}catch(h){console.error("Erreur lors du chargement des données:",h),l([]),p([]),x([]),m([]),N([]),k([]),U([]),v([])}finally{r(!1)}};t();const a=setInterval(t,3e5);return()=>clearInterval(a)},[]);const T=t=>!t||t==="0"?0:parseInt(t.replace(/\s/g,""),10)||0,ae=t=>{if(t==null)return 0;if(typeof t=="number")return t;let a=String(t).trim();a=a.replace(/\u00A0/g,"").replace(/\s/g,""),a=a.replace("%","").replace(",",".");const h=parseFloat(a);return Number.isFinite(h)?h:0},ne=t=>!b||b.length===0?null:b.find(a=>{const h=(a.key||"").toString().toLowerCase(),M=(a.type||"").toString().toLowerCase();return t(h,M)})||null,P=ne((t,a)=>t.includes("non")||a.includes("non")),F=ne((t,a)=>(t.includes("vie")||a.includes("vie"))&&!t.includes("non")&&!a.includes("non")),$=ne((t,a)=>t==="total"||a==="total"),re=ae((P==null?void 0:P.taux_remplissage)??(P==null?void 0:P.tauxRemplissage)??(P==null?void 0:P.taux)??0),ie=ae((F==null?void 0:F.taux_remplissage)??(F==null?void 0:F.tauxRemplissage)??(F==null?void 0:F.taux)??0);ae(($==null?void 0:$.taux_remplissage)??($==null?void 0:$.tauxRemplissage)??($==null?void 0:$.taux)??0);const ge=()=>{var W,H,q,K,X,Y;if(!n||n.length===0)return[{key:"mac",bu:"MAC",capitalisation:"0",retraite:"0",deces:"0",total:"0"},{key:"mcma",bu:"MCMA",capitalisation:"0",retraite:"0",deces:"0",total:"0"},{key:"total",bu:"Total",capitalisation:"0",retraite:"0",deces:"0",total:"0"}];const t={};n.forEach(Q=>{const oe=Q.bu.split(" - "),L=oe[0],se=oe[1];t[L]||(t[L]={key:L.toLowerCase(),bu:L,capitalisation:"0",retraite:"0",deces:"0",total:0});const de=Math.round(Q.vie||0),le=de.toLocaleString("fr-FR").replace(/,/g," ");se==="Capitalisation"?t[L].capitalisation=le:se==="Retraite"?t[L].retraite=le:se==="Décés"&&(t[L].deces=le),t[L].total+=de}),Object.keys(t).forEach(Q=>{t[Q].total=t[Q].total.toLocaleString("fr-FR").replace(/,/g," ")});const a=[];t.MAC&&a.push(t.MAC),t.MCMA&&a.push(t.MCMA);const h=T((W=t.MAC)==null?void 0:W.capitalisation)+T((H=t.MCMA)==null?void 0:H.capitalisation),M=T((q=t.MAC)==null?void 0:q.retraite)+T((K=t.MCMA)==null?void 0:K.retraite),c=T((X=t.MAC)==null?void 0:X.deces)+T((Y=t.MCMA)==null?void 0:Y.deces),I=h+M+c;return a.push({key:"total",bu:"Total",capitalisation:h.toLocaleString("fr-FR").replace(/,/g," "),retraite:M.toLocaleString("fr-FR").replace(/,/g," "),deces:c.toLocaleString("fr-FR").replace(/,/g," "),total:I.toLocaleString("fr-FR").replace(/,/g," ")}),a};return u?e.jsx("div",{className:"p-2 sm:p-4 md:p-8 space-y-6 flex justify-center items-center",children:e.jsx("div",{className:"text-lg",children:"Chargement des données..."})}):e.jsxs("div",{className:"p-2 sm:p-4 md:p-8 space-y-6",children:[e.jsx("div",{className:"text-center py-8",children:e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-zinc-900",children:"Synthèse globale du CA"})}),e.jsxs("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4 grid grid-cols-[1fr_420px] gap-6 items-start mx-auto",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-zinc-900 mb-2 text-left",children:"CA du jour "}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"w-full max-w-5xl overflow-x-auto",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-lg w-full min-w-[600px]",pagination:!1,columns:[{title:"",dataIndex:"type",key:"type",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"CA du jour",dataIndex:"caJour",key:"caJour",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:`CA du mois de ${Z()} arrêté au ${B()}`,dataIndex:"caMoisActuel",key:"caMoisActuel",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:`CA du mois de ${Z()} ${E()}`,dataIndex:"caMoisAnneePrecedente",key:"caMoisAnneePrecedente",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:`Taux de remplissage ${S()} %`,dataIndex:"tauxRemplissage",key:"tauxRemplissage",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-green-200 text-blue-900 px-2 py-1 rounded":"bg-green-300 text-blue-900 px-2 py-1 rounded",children:t})}],dataSource:b&&b.length>0?b.map((t,a)=>({key:t.key||`row-${a}`,type:t.type||t.key||"",caJour:s(t.ca_du_jour??t.caDuJour??0),caMoisActuel:s(t.ca_mois_actuel??t.caMoisActuel??0),caMoisAnneePrecedente:s(t.ca_mois_annee_precedente??t.caMoisAnneePrecedente??0),tauxRemplissage:o(t.taux_remplissage??t.tauxRemplissage??0)})):[{key:"nonvie",type:"Non Vie",caJour:s(0),caMoisActuel:s(0),caMoisAnneePrecedente:s(0),tauxRemplissage:o(0)},{key:"vie",type:"Vie",caJour:s(0),caMoisActuel:s(0),caMoisAnneePrecedente:s(0),tauxRemplissage:o(0)},{key:"total",type:"Total",caJour:s(0),caMoisActuel:s(0),caMoisAnneePrecedente:s(0),tauxRemplissage:o(0)}],rowClassName:t=>t.key==="total"?"bg-blue-100 font-bold":"bg-blue-50"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("div",{className:"mt-2 space-y-6",children:[e.jsxs("div",{className:"flex items-center text-sm space-x-4",children:[e.jsx("span",{className:"font-medium w-24",children:"Non Vie"}),e.jsx("div",{className:"flex-1 bg-zinc-200 rounded-full h-4",children:e.jsx("div",{className:"bg-emerald-500 h-4 rounded-full text-white text-xs flex items-center justify-end pr-2",style:{width:`${Math.max(0,Math.min(re,160))}%`},children:e.jsx("span",{className:"pr-2",children:o(re)})})})]}),e.jsxs("div",{className:"flex items-center text-sm space-x-4",children:[e.jsx("span",{className:"font-medium w-24",children:"Vie"}),e.jsx("div",{className:"flex-1 bg-zinc-200 rounded-full h-4",children:e.jsx("div",{className:"bg-emerald-500 h-4 rounded-full text-white text-xs flex items-center justify-end pr-2",style:{width:`${Math.max(0,Math.min(ie,160))}%`},children:e.jsx("span",{className:"pr-2",children:o(ie)})})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-8 justify-items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-red-50 rounded-lg px-3 py-1 shadow-sm w-full max-w-[420px]",children:[e.jsx("span",{className:"h-4 w-4 rounded-full bg-red-500 border-2 border-white shadow"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Chiffre d’affaires en baisse"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-orange-50 rounded-lg px-3 py-1 shadow-sm w-full max-w-[420px]",children:[e.jsx("span",{className:"h-4 w-4 rounded-full bg-orange-400 border-2 border-white shadow"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Croissance inférieure à 5 %"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-50 rounded-lg px-3 py-1 shadow-sm w-full max-w-[420px]",children:[e.jsx("span",{className:"h-4 w-4 rounded-full bg-green-500 border-2 border-white shadow"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Croissance supérieure à 5 %"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-green-100 rounded-lg px-3 py-1 shadow-sm w-full max-w-[420px]",children:[e.jsx("span",{className:"h-4 w-4 rounded-full bg-green-700 border-2 border-white shadow"}),e.jsx("span",{className:"text-sm text-gray-700 font-medium",children:"Croissance supérieure à 100 %"})]})]})]})]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Non Vie du ",B()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-2",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs compact-table",size:"small",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",align:"left",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"AUTO",dataIndex:"auto",key:"auto",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"AT",dataIndex:"at",key:"at",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"MALADIE",dataIndex:"maladie",key:"maladie",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"DIVERS",dataIndex:"divers",key:"divers",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Total",dataIndex:"total",key:"total",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})}],dataSource:(i||[]).map((t,a)=>({key:t.bu&&t.bu.toLowerCase()==="total"?"total":t.bu||`row-${a}`,bu:t.bu||"",auto:s(t.auto),at:s(t.at),maladie:s(t.maladie),divers:s(t.divers),total:s(t.total)})),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":""})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Vie du ",B()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-2",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs compact-table",size:"small",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",align:"left",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"Capitalisation",dataIndex:"capitalisation",key:"capitalisation",align:"right",render:(t,a)=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Retraite",dataIndex:"retraite",key:"retraite",align:"right",render:(t,a)=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Décès",dataIndex:"deces",key:"deces",align:"right",render:(t,a)=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Total",dataIndex:"total",key:"total",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})}],dataSource:ge(),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":""})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsx("span",{className:"text-lg font-semibold text-zinc-900",children:"Les émissions supérieures à 500 KDHS"}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:{pageSize:10},locale:{emptyText:e.jsxs("div",{style:{padding:"40px 20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"16px",color:"#1e40af",fontWeight:"600",marginBottom:"8px"},children:"Il n'y a pas d'émissions supérieures à 500K"}),e.jsx("div",{style:{fontSize:"14px",color:"#64748b"},children:"Aucune émission n'a dépassé le seuil de 500 000 DHS"})]})},columns:[{title:"NON VIE",dataIndex:"nonVie",key:"nonVie",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Compagnie",dataIndex:"compagnie",key:"compagnie",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Segment",dataIndex:"segment",key:"segment",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Nom site",dataIndex:"nomSite",key:"nomSite",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Police",dataIndex:"police",key:"police",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Nom client",dataIndex:"nomClient",key:"nomClient",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Produit",dataIndex:"produit",key:"produit",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Avenant",dataIndex:"avenant",key:"avenant",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Date Effet",dataIndex:"dateEffet",key:"dateEffet",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Date émission",dataIndex:"dateEmission",key:"dateEmission",align:"center",render:t=>e.jsx("span",{className:"font-medium text-blue-900",children:t})},{title:"Prime Nette",dataIndex:"primeNette",key:"primeNette",align:"center",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})}],rowClassName:()=>"bg-blue-50",dataSource:d.map((t,a)=>({key:a,nonVie:t.source||"",compagnie:t.compagnie||"",segment:t.segment||"",nomSite:t.nomSite||"",police:t.police||"",nomClient:t.nomClient||"",produit:t.produit||"",avenant:t.avenant||"",dateEffet:t.dateEffet?new Date(t.dateEffet).toLocaleDateString("fr-FR"):"",dateEmission:t.dateEmission?new Date(t.dateEmission).toLocaleDateString("fr-FR"):"",primeNette:s(t.primeNette)})),scroll:{x:1200}})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Non Vie du mois de ",Z()," au ",B()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"AUTO",children:[{title:"CA",dataIndex:"auto",key:"auto",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux de remplissage",dataIndex:"tauxRemplissageAuto",key:"tauxRemplissageAuto",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"AT",children:[{title:"CA",dataIndex:"at",key:"at",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux de remplissage",dataIndex:"tauxRemplissageAt",key:"tauxRemplissageAt",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"MALADIE",children:[{title:"CA",dataIndex:"maladie",key:"maladie",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux de remplissage",dataIndex:"tauxRemplissageMaladie",key:"tauxRemplissageMaladie",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"DIVERS",children:[{title:"CA",dataIndex:"divers",key:"divers",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux de remplissage",dataIndex:"tauxRemplissageDivers",key:"tauxRemplissageDivers",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Total",children:[{title:"CA",dataIndex:"total",key:"total",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:"Taux de remplissage",dataIndex:"tauxRemplissageTotal",key:"tauxRemplissageTotal",align:"right",render:t=>e.jsx(f,{value:t})}]}],dataSource:A.map((t,a)=>{var h;return{key:((h=t.bu)==null?void 0:h.toLowerCase().replace(/[^a-z0-9]/g,""))||`row-${a}`,bu:t.bu||"",auto:t.auto||"0",tauxRemplissageAuto:t.tauxRemplissageAuto||"0,00 %",at:t.at||"0",tauxRemplissageAt:t.tauxRemplissageAt||"0,00 %",maladie:t.maladie||"0",tauxRemplissageMaladie:t.tauxRemplissageMaladie||"0,00 %",divers:t.divers||"0",tauxRemplissageDivers:t.tauxRemplissageDivers||"0,00 %",total:t.total||"0",tauxRemplissageTotal:t.tauxRemplissageTotal||"0,00 %"}}),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":""})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Vie du mois de ",Z()," au ",B()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"Capitalisation CA",dataIndex:"capCa",key:"capCa",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Capitalisation Taux de remplissage",dataIndex:"capEvo",key:"capEvo",align:"right",render:t=>e.jsx(f,{value:t})},{title:"Retraite CA",dataIndex:"retCa",key:"retCa",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Retraite Taux de remplissage",dataIndex:"retEvo",key:"retEvo",align:"right",render:t=>e.jsx(f,{value:t})},{title:"Décés CA",dataIndex:"decesCa",key:"decesCa",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Décés Taux de remplissage",dataIndex:"decesEvo",key:"decesEvo",align:"right",render:t=>e.jsx(f,{value:t})},{title:"Total CA",dataIndex:"totalCa",key:"totalCa",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:"Total Taux de remplissage",dataIndex:"totalEvo",key:"totalEvo",align:"right",render:t=>e.jsx(f,{value:t})}],dataSource:j.map((t,a)=>{var h;return{key:((h=t.mutuelle)==null?void 0:h.toLowerCase())||`row-${a}`,bu:t.mutuelle||"",capCa:t.capitalisation||"0",capEvo:t.tauxRemplissageCapitalisation||"0,00 %",retCa:t.retraite||"0",retEvo:t.tauxRemplissageRetraite||"0,00 %",decesCa:t.deces||"0",decesEvo:t.tauxRemplissageDeces||"0,00 %",totalCa:t.total||"0",totalEvo:t.tauxRemplissageTotal||"0,00 %"}}),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":""})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Non Vie de l'exercice ",S()," au ",B()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",align:"left",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"AUTO",children:[{title:`CA ${S()}`,dataIndex:"autoCourante",key:"autoCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"autoPrecedente",key:"autoPrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"autoTaux",key:"autoTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"AT",children:[{title:`CA ${S()}`,dataIndex:"atCourante",key:"atCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"atPrecedente",key:"atPrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"atTaux",key:"atTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"MALADIE",children:[{title:`CA ${S()}`,dataIndex:"maladieCourante",key:"maladieCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"maladiePrecedente",key:"maladiePrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"maladieTaux",key:"maladieTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"DIVERS",children:[{title:`CA ${S()}`,dataIndex:"diversCourante",key:"diversCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"diversPrecedente",key:"diversPrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"diversTaux",key:"diversTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Total",children:[{title:`CA ${S()}`,dataIndex:"totalCourante",key:"totalCourante",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:`CA ${E()}`,dataIndex:"totalPrecedente",key:"totalPrecedente",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:"Taux",dataIndex:"totalTaux",key:"totalTaux",align:"right",render:t=>e.jsx(f,{value:t})}]}],dataSource:(ee||[]).map((t,a)=>{var h;return{key:((h=t.bu)==null?void 0:h.toLowerCase())||`row-${a}`,bu:t.bu||"",autoCourante:t.formattedCaAutoAnneeCourante||s(t.caAutoAnneeCourante||0),autoPrecedente:t.formattedCaAutoAnneePrecedente||s(t.caAutoAnneePrecedente||0),autoTaux:o(t.tauxAuto??0),atCourante:t.formattedCaAtAnneeCourante||s(t.caAtAnneeCourante||0),atPrecedente:t.formattedCaAtAnneePrecedente||s(t.caAtAnneePrecedente||0),atTaux:o(t.tauxAt??0),maladieCourante:t.formattedCaMaladieAnneeCourante||s(t.caMaladieAnneeCourante||0),maladiePrecedente:t.formattedCaMaladieAnneePrecedente||s(t.caMaladieAnneePrecedente||0),maladieTaux:o(t.tauxMaladie??0),diversCourante:t.formattedCaDiversAnneeCourante||s(t.caDiversAnneeCourante||0),diversPrecedente:t.formattedCaDiversAnneePrecedente||s(t.caDiversAnneePrecedente||0),diversTaux:o(t.tauxDivers??0),totalCourante:t.formattedCaTotalAnneeCourante||s(t.caTotalAnneeCourante||0),totalPrecedente:t.formattedCaTotalAnneePrecedente||s(t.caTotalAnneePrecedente||0),totalTaux:o(t.tauxTotal??0)}}),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":"",scroll:{x:1500}})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Vie de l'exercice ",S()," au ",B()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"BU",dataIndex:"segment",key:"segment",align:"left",render:(t,a)=>e.jsx("span",{className:a.segment==="TOTAL"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"Capitalisation",children:[{title:`CA ${S()}`,dataIndex:"formattedCapCaCourante",key:"capCaCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"formattedCapCaPrecedente",key:"capCaPrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"capTaux",key:"capTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Retraite",children:[{title:`CA ${S()}`,dataIndex:"formattedRetCaCourante",key:"retCaCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"formattedRetCaPrecedente",key:"retCaPrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"retTaux",key:"retTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Décès",children:[{title:`CA ${S()}`,dataIndex:"formattedDecCaCourante",key:"decCaCourante",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:`CA ${E()}`,dataIndex:"formattedDecCaPrecedente",key:"decCaPrecedente",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux",dataIndex:"decTaux",key:"decTaux",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Total",children:[{title:`CA ${S()}`,dataIndex:"formattedTotalCaCourante",key:"totalCaCourante",align:"right",render:(t,a)=>e.jsx("span",{className:a.segment==="TOTAL"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:`CA ${E()}`,dataIndex:"formattedTotalCaPrecedente",key:"totalCaPrecedente",align:"right",render:(t,a)=>e.jsx("span",{className:a.segment==="TOTAL"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:"Taux",dataIndex:"totalTaux",key:"totalTaux",align:"right",render:t=>e.jsx(f,{value:t})}]}],dataSource:(C||[]).map(t=>{var h;return{key:((h=t.segment)==null?void 0:h.toLowerCase())||"",segment:t.segment||"",formattedCapCaCourante:s(t.capCaCourante),formattedCapCaPrecedente:s(t.capCaPrecedente),capTaux:`${(t.capTaux||0).toFixed(2).replace(".",",")} %`,formattedRetCaCourante:s(t.retCaCourante),formattedRetCaPrecedente:s(t.retCaPrecedente),retTaux:`${(t.retTaux||0).toFixed(2).replace(".",",")} %`,formattedDecCaCourante:s(t.decCaCourante),formattedDecCaPrecedente:s(t.decCaPrecedente),decTaux:`${(t.decTaux||0).toFixed(2).replace(".",",")} %`,formattedTotalCaCourante:s(t.totalCaCourante||(t.capCaCourante||0)+(t.retCaCourante||0)+(t.decCaCourante||0)),formattedTotalCaPrecedente:s(t.totalCaPrecedente||(t.capCaPrecedente||0)+(t.retCaPrecedente||0)+(t.decCaPrecedente||0)),totalTaux:`${(t.totalTaux||0).toFixed(2).replace(".",",")} %`}}),rowClassName:t=>t.segment==="TOTAL"?"bg-zinc-100 font-bold":"",scroll:{x:1500}})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Non Vie à fin de ",ue()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",align:"left",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"AUTO",children:[{title:"CA",dataIndex:"auto",key:"auto",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux d'évolution",dataIndex:"tauxAuto",key:"tauxAuto",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"AT",children:[{title:"CA",dataIndex:"at",key:"at",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux d'évolution",dataIndex:"tauxAt",key:"tauxAt",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"MALADIE",children:[{title:"CA",dataIndex:"maladie",key:"maladie",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux d'évolution",dataIndex:"tauxMaladie",key:"tauxMaladie",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"DIVERS",children:[{title:"CA",dataIndex:"divers",key:"divers",align:"right",render:(t,a)=>e.jsx("span",{className:(a.key==="total","font-bold text-blue-900"),children:t})},{title:"Taux d'évolution",dataIndex:"tauxDivers",key:"tauxDivers",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Total",children:[{title:"CA",dataIndex:"total",key:"total",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:"Taux d'évolution",dataIndex:"tauxTotal",key:"tauxTotal",align:"right",render:t=>e.jsx(f,{value:t})}]}],dataSource:(w||[]).map((t,a)=>{var h;return{key:((h=t.bu)==null?void 0:h.toLowerCase())||`row-${a}`,bu:t.bu||"",auto:s(t.ca_auto_annee_courante),tauxAuto:o(t.taux_auto),at:s(t.ca_at_annee_courante),tauxAt:o(t.taux_at),maladie:s(t.ca_maladie_annee_courante),tauxMaladie:o(t.taux_maladie),divers:s(t.ca_divers_annee_courante),tauxDivers:o(t.taux_divers),total:s(t.ca_total_annee_courante),tauxTotal:o(t.taux_total)}}),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":""})})}]}),e.jsx(V,{defaultActiveKey:["1"],items:[{key:"1",label:e.jsxs("span",{className:"text-lg font-semibold text-zinc-900",children:["CA Vie à fin de ",ue()," par branche et par BU"]}),children:e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-4",children:g&&g.length>0?e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"BU",dataIndex:"bu",key:"bu",align:"left",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold text-blue-900":"font-medium text-blue-900",children:t})},{title:"Capitalisation",children:[{title:"CA",dataIndex:"capitalisation",key:"capitalisation",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux d'évolution",dataIndex:"tauxCapitalisation",key:"tauxCapitalisation",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Retraite",children:[{title:"CA",dataIndex:"retraite",key:"retraite",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux d'évolution",dataIndex:"tauxRetraite",key:"tauxRetraite",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Décès",children:[{title:"CA",dataIndex:"deces",key:"deces",align:"right",render:t=>e.jsx("span",{className:"font-bold text-blue-900",children:t})},{title:"Taux d'évolution",dataIndex:"tauxDeces",key:"tauxDeces",align:"right",render:t=>e.jsx(f,{value:t})}]},{title:"Total",children:[{title:"CA",dataIndex:"total",key:"total",align:"right",render:(t,a)=>e.jsx("span",{className:a.key==="total"?"font-bold bg-blue-100 text-blue-900 px-1 py-0.5 rounded":"font-bold bg-blue-50 text-blue-900 px-1 py-0.5 rounded",children:t})},{title:"Taux d'évolution",dataIndex:"tauxTotal",key:"tauxTotal",align:"right",render:t=>e.jsx(f,{value:t})}]}],dataSource:(()=>{if(console.log("Données de l'API caVieThisMonthData:",g),!g||g.length===0)return console.log("Aucune donnée API disponible"),[];let t=0,a=0,h=0;g.forEach(c=>{c.bu!=="TOTAL"&&(t+=parseFloat(c.caCapitalisation||0),a+=parseFloat(c.caRetr||0),h+=parseFloat(c.caDeces||0))}),g.length>0&&g.reduce((c,I)=>c+parseFloat(I.tauxCapitalisation||0),0)/g.length,g.length>0&&g.reduce((c,I)=>c+parseFloat(I.tauxRetr||0),0)/g.length,g.length>0&&g.reduce((c,I)=>c+parseFloat(I.tauxDeces||0),0)/g.length,g.length>0&&g.reduce((c,I)=>c+parseFloat(I.tauxTotal||0),0)/g.length;const M=g.filter(c=>c.bu&&c.bu!=="TOTAL").map((c,I)=>{var W;return{key:((W=c.bu)==null?void 0:W.toLowerCase())||`row-${I}`,bu:c.bu||"",capitalisation:s(c.caCapitalisation),tauxCapitalisation:o(c.tauxCapitalisation),retraite:s(c.caRetr),tauxRetraite:o(c.tauxRetr),deces:s(c.caDeces),tauxDeces:o(c.tauxDeces),total:s(parseFloat(c.caCapitalisation||0)+parseFloat(c.caRetr||0)+parseFloat(c.caDeces||0)),tauxTotal:o(c.tauxTotal)}});return console.log("Données formatées pour le tableau:",M),M})(),rowClassName:t=>t.key==="total"?"bg-zinc-100 font-bold":""}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-lg text-blue-900 font-semibold mb-2",children:"Chargement des données..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Les données du CA Vie sont en cours de chargement."})]})})}]})]})}const{Content:et}=he,tt=[{branche:"Capitalisation",ca:32926257,taux:6.03},{branche:"Retraite",ca:32945917,taux:40.75},{branche:"Décès",ca:7069009,taux:32.71},{branche:"Auto",ca:1752558855,taux:9.44},{branche:"AT",ca:239094187,taux:7.36},{branche:"Maladie",ca:82405719,taux:30.17},{branche:"Divers",ca:345525988,taux:11.78}];function at(){return e.jsxs(et,{className:"p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{style:{textAlign:"center",padding:50,width:"100%"},children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-900",children:"Tableau de bord"}),e.jsx("p",{className:"text-zinc-500",children:"Bon retour, voici votre résumé des revenus."})]}),e.jsxs("main",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsxs(_,{className:"bg-card-light border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-zinc-500 text-sm font-medium",children:"CA du jour - Total"}),e.jsx("p",{className:"text-2xl font-semibold text-zinc-900 mt-2",children:"3 488 484,00"}),e.jsx("p",{className:"text-sm text-emerald-500 mt-1",children:"+7,11 % vs YTD"})]}),e.jsxs(_,{className:"bg-card-light border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-zinc-500 text-sm font-medium",children:"CA du jour - Non Vie"}),e.jsx("p",{className:"text-2xl font-semibold text-zinc-900 mt-2",children:"3 477 623,00"}),e.jsx("p",{className:"text-sm text-emerald-500 mt-1",children:"+10,16 % vs YTD"})]}),e.jsxs(_,{className:"bg-card-light border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-zinc-500 text-sm font-medium",children:"CA du jour - Vie"}),e.jsx("p",{className:"text-2xl font-semibold text-zinc-900 mt-2",children:"10 861,00"}),e.jsx("p",{className:"text-sm text-emerald-500 mt-1",children:"+6,15 % vs YTD"})]}),e.jsxs(_,{className:"bg-card-light border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-zinc-500 text-sm font-medium",children:"Fill Rate"}),e.jsx("p",{className:"text-2xl font-semibold text-zinc-900 mt-2",children:"19,24 %"}),e.jsx("p",{className:"text-sm text-red-500 mt-1",children:"-2,5 % vs Nov. 2024"})]})]}),e.jsxs(_,{className:"bg-card-light border border-border-light rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-zinc-900 mb-2",children:"Graphique global CA Vie / Non Vie (J-1)"}),e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Barres = CA total  •  Courbe = taux (%)."}),e.jsx("div",{className:"w-full h-80",children:e.jsx(Re,{children:e.jsxs(Me,{data:tt,children:[e.jsx(Ee,{strokeDasharray:"3 3"}),e.jsx(Pe,{dataKey:"branche",tick:{fontSize:12}}),e.jsx(xe,{yAxisId:"left"}),e.jsx(xe,{yAxisId:"right",orientation:"right",domain:[0,100],tickFormatter:n=>`${n}%`}),e.jsx(Fe,{}),e.jsx($e,{}),e.jsx(Ve,{yAxisId:"left",dataKey:"ca",fill:"#3b82f6",name:"CA Total"}),e.jsx(We,{yAxisId:"right",type:"monotone",dataKey:"taux",stroke:"#ef4444",strokeWidth:2,name:"Taux (%)"})]})})})]}),e.jsxs(_,{className:"bg-card-light border border-border-light rounded-lg shadow-sm",children:[e.jsx("h3",{className:"text-lg font-semibold text-zinc-900 mb-4",children:"Revenus par Type"}),e.jsxs("div",{className:"h-56 relative flex items-center justify-center mb-4",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#67e8f9",strokeWidth:"12"}),e.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#60a5fa",strokeWidth:"12",strokeDasharray:"189.28 62.83",strokeDashoffset:"0",transform:"rotate(-90 50 50)"})]}),e.jsxs("div",{className:"absolute flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-xs text-zinc-500",children:"Total CA"}),e.jsx("span",{className:"text-2xl font-bold text-zinc-900 text-center leading-tight",children:"11 868 520,38"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-400 mr-2"}),e.jsx("span",{children:"Vie"})]}),e.jsx("span",{className:"font-medium text-zinc-900",children:"75.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-sky-300 mr-2"}),e.jsx("span",{children:"Non-Vie"})]}),e.jsx("span",{className:"font-medium text-zinc-900",children:"24.5%"})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 flex flex-col gap-6",children:[e.jsxs(_,{className:"bg-white border border-zinc-200 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-zinc-900",children:"Tendance des Revenus"}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Performance depuis le début de l'année"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 sm:mt-0 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-primary mr-2"}),e.jsx("span",{children:"2025"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-zinc-300 mr-2"}),e.jsx("span",{children:"2024"})]})]})]}),e.jsx("div",{className:"h-80 w-full",children:e.jsxs("svg",{className:"font-sans text-xs",viewBox:"0 0 500 250",width:"100%",height:"100%",children:[e.jsxs("g",{className:"text-zinc-400",children:[e.jsx("line",{x1:"40",y1:"20",x2:"40",y2:"220",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"2,3"}),e.jsx("line",{x1:"40",y1:"220",x2:"480",y2:"220",stroke:"currentColor",strokeWidth:"1"}),e.jsx("text",{x:"30",y:"25",textAnchor:"end",children:"10k"}),e.jsx("text",{x:"30",y:"75",textAnchor:"end",children:"7.5k"}),e.jsx("text",{x:"30",y:"125",textAnchor:"end",children:"5k"}),e.jsx("text",{x:"30",y:"175",textAnchor:"end",children:"2.5k"}),e.jsx("text",{x:"30",y:"225",textAnchor:"end",children:"0"}),e.jsx("text",{x:"60",y:"235",textAnchor:"middle",children:"Jan"}),e.jsx("text",{x:"130",y:"235",textAnchor:"middle",children:"Mar"}),e.jsx("text",{x:"200",y:"235",textAnchor:"middle",children:"Mai"}),e.jsx("text",{x:"270",y:"235",textAnchor:"middle",children:"Jul"}),e.jsx("text",{x:"340",y:"235",textAnchor:"middle",children:"Sep"}),e.jsx("text",{x:"410",y:"235",textAnchor:"middle",children:"Nov"})]}),e.jsx("polyline",{fill:"none",stroke:"#a1a1aa",strokeWidth:"2",points:"60,180 130,160 200,120 270,140 340,110 410,90 480,100"}),e.jsx("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"2",points:"60,150 130,130 200,80 270,90 340,60 410,40 480,25"}),e.jsx("circle",{cx:"480",cy:"25",r:"4",fill:"#3b82f6",stroke:"#fff",strokeWidth:"2"})]})})]}),e.jsxs(_,{className:"bg-white border border-zinc-200 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(pe,{className:"text-primary text-2xl mr-3"}),e.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Flash Info"})]}),e.jsx(D,{className:"rounded-xl overflow-hidden text-xs",pagination:!1,columns:[{title:"",dataIndex:"type",key:"type"},{title:"CA 20/11/25",dataIndex:"ca",key:"ca",align:"right"},{title:"YTD (C.A)",dataIndex:"ytd",key:"ytd",align:"right"},{title:"YTD (Evo %)",dataIndex:"evo",key:"evo",align:"right",render:n=>e.jsx("span",{className:"bg-green-500 text-white rounded font-semibold px-2 py-1",children:n})}],dataSource:[{key:"nonvie",type:"Non Vie",ca:"3 477 623,00",ytd:"2 419 567 016,15",evo:"10,16 %"},{key:"vie",type:"Vie",ca:"10 861,00",ytd:"7 449 270 414,23",evo:"6,15 %"},{key:"total",type:e.jsx("span",{className:"font-bold",children:"Total"}),ca:e.jsx("span",{className:"font-bold",children:"3 488 484,00"}),ytd:e.jsx("span",{className:"font-bold",children:"9 868 837 430,38"}),evo:e.jsx("span",{className:"font-bold",children:"7,11 %"})}],rowClassName:n=>n.key==="total"?"bg-zinc-100":""}),e.jsxs("div",{className:"mt-4 space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-[#C55A11] bg-opacity-70 mr-2"}),e.jsx("span",{className:"text-zinc-600",children:"Baisse par rapport à l'année précédente"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-[#D5A680] bg-opacity-80 mr-2"}),e.jsx("span",{className:"text-zinc-600",children:"Croissance inférieure à 5 %"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-[#70AD47] bg-opacity-80 mr-2"}),e.jsx("span",{className:"text-zinc-600",children:"Croissance supérieure à 5 %"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-[#A9D18E] bg-opacity-80 mr-2"}),e.jsx("span",{className:"text-zinc-600",children:"Croissance supérieure à 100 %"})]})]})]})]})]})]})}function J(n){if(!n)return{fontWeight:700,borderRadius:6,padding:"2px 8px",whiteSpace:"nowrap"};const l=n.toString().replace("%","").replace(",",".").trim(),i=parseFloat(l);return isNaN(i)?{fontWeight:700,borderRadius:6,padding:"2px 8px",whiteSpace:"nowrap"}:i<0?{background:"#ef4444",color:"#fff",fontWeight:700,borderRadius:6,padding:"2px 8px",whiteSpace:"nowrap"}:i<5?{background:"#fb923c",color:"#fff",fontWeight:700,borderRadius:6,padding:"2px 8px",whiteSpace:"nowrap"}:i>=100?{background:"#15803d",color:"#fff",fontWeight:700,borderRadius:6,padding:"2px 8px",whiteSpace:"nowrap"}:{background:"#22c55e",color:"#fff",fontWeight:700,borderRadius:6,padding:"2px 8px",whiteSpace:"nowrap"}}function nt(){const[n,l]=y.useState(null),[i,p]=y.useState([]),[d,x]=y.useState(!0),[A,m]=y.useState(null);y.useEffect(()=>{(async()=>{try{x(!0);const r=await fe();p(r),m(null)}catch(r){console.error("Erreur lors du chargement des données:",r),m(r.message),p([])}finally{x(!1)}})()},[]);const j=()=>{const u=new Date;return u.setDate(u.getDate()-1),u.toLocaleDateString("fr-FR")},N=()=>{const u=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],r=new Date;return r.setDate(r.getDate()-1),u[r.getMonth()]},w=()=>{const u=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],r=new Date;r.setDate(r.getDate()-1);let T=r.getMonth()-1;return T<0&&(T=11),u[T]},k=()=>{const u=new Date;u.setDate(u.getDate()-1);let r=u.getMonth()-1,T=u.getFullYear();return r<0&&(T=T-1),T},g=()=>new Date().getFullYear()-1,O=()=>new Date().getFullYear(),ee=[{title:"",dataIndex:"type",key:"type",width:100,render:(u,r)=>e.jsx("span",{style:{fontWeight:700,color:"#1e3a8a"},children:r.type})},{title:`CA du ${j()}`,dataIndex:"ca_du_jour",width:140,align:"right",render:(u,r)=>e.jsx("span",{style:{fontWeight:700,color:"#1e3a8a",whiteSpace:"nowrap"},children:r.ca_du_jour!=null?s(r.ca_du_jour):""})},{title:`CA du mois de ${N().charAt(0).toUpperCase()+N().slice(1)} arrêté au ${j()}`,dataIndex:"ca_mois_actuel",width:200,align:"right",render:(u,r)=>e.jsx("span",{style:{fontWeight:700,color:"#1e3a8a",whiteSpace:"nowrap"},children:r.ca_mois_actuel!=null?s(r.ca_mois_actuel):""})},{title:`CA du mois de ${N().charAt(0).toUpperCase()+N().slice(1)} ${g()}`,dataIndex:"ca_mois_annee_precedente",width:160,align:"right",render:(u,r)=>e.jsx("span",{style:{fontWeight:700,color:"#1e3a8a",whiteSpace:"nowrap"},children:r.ca_mois_annee_precedente!=null?s(r.ca_mois_annee_precedente):""})},{title:`Taux de remplissage ${O()} %`,dataIndex:"taux_remplissage",width:140,align:"right",render:(u,r)=>e.jsx("span",{style:J(r.taux_remplissage!=null?o(r.taux_remplissage):""),children:r.taux_remplissage!=null?o(r.taux_remplissage):""})},{title:"Year to Date (C.A)",dataIndex:"ytd_ca",width:180,align:"right",render:(u,r)=>e.jsx("span",{style:{fontWeight:700,color:"#1e3a8a",whiteSpace:"nowrap",display:"block"},children:r.ytd_ca!=null?s(r.ytd_ca):""})},{title:"Year to Date (Évolution %)",dataIndex:"ytd_evolution",width:160,align:"right",render:(u,r)=>e.jsx("span",{style:J(r.ytd_evolution!=null?o(r.ytd_evolution):""),children:r.ytd_evolution!=null?o(r.ytd_evolution):""})},{title:`CA du mois de ${w()} ${k()}`,dataIndex:"ca_mois_precedent",width:160,align:"right",render:(u,r)=>e.jsx("span",{style:{fontWeight:700,color:"#1e3a8a",whiteSpace:"nowrap"},children:r.ca_mois_precedent!=null?s(r.ca_mois_precedent):""})},{title:`Évolution % du mois de ${w()} ${k()}`,dataIndex:"evolution_mois_precedent",width:180,align:"right",render:(u,r)=>e.jsx("span",{style:J(r.evolution_mois_precedent!=null?o(r.evolution_mois_precedent):""),children:r.evolution_mois_precedent!=null?o(r.evolution_mois_precedent):""})}],U=u=>i.find(r=>r.key===u),C=U("non-vie"),v=U("vie"),b=U("total");function te(){return n==="non-vie"?C?[C]:[]:n==="vie"?v?[v]:[]:n==="total"?i:[]}return e.jsxs("div",{style:{background:"#f8fafc",minHeight:"100vh",padding:32},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[e.jsx("div",{style:{fontSize:28,fontWeight:700,color:"#1677ff",marginBottom:8},children:"Flash Info"}),e.jsxs("div",{style:{fontSize:18,color:"#64748b",marginBottom:8},children:["Résumé du chiffre d'affaires global au ",j()]}),e.jsx("div",{style:{height:2,background:"linear-gradient(90deg, #1677ff 0%, #f472b6 100%)",margin:"0 auto 24px",width:320}})]}),e.jsxs("div",{style:{display:"flex",gap:24,justifyContent:"center",marginTop:16,flexWrap:"wrap"},children:[e.jsxs(_,{styles:{body:{padding:24,background:"#2563eb",cursor:"pointer"},header:{background:"#2563eb",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:[e.jsxs("span",{style:{fontSize:22,color:"#fff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("span",{role:"img","aria-label":"doc",children:"📄"})," Total"]}),e.jsx("span",{style:{fontSize:14,color:"#dbeafe",fontWeight:500,textAlign:"center",width:"100%"},children:"Chiffre d'Affaires Combiné"})]}),onClick:()=>l(n==="total"?null:"total"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#dbeafe",fontWeight:500},children:["CA Total au ",j()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#fff"},children:d?"Chargement...":(b==null?void 0:b.ca_du_jour)!=null?s(b.ca_du_jour):s(0)})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:13,color:"#dbeafe",fontWeight:500},children:"CA Total Cumulé à ce jour"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:d?"Chargement...":(b==null?void 0:b.ytd_ca)!=null?s(b.ytd_ca):s(0)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{fontSize:13,color:"#dbeafe",fontWeight:500},children:"Croissance Totale Cumulée"}),e.jsxs("div",{style:{fontSize:18,fontWeight:700,color:"#fff"},children:[e.jsx("span",{style:{...J((b==null?void 0:b.ytd_evolution)!=null?o(b.ytd_evolution):o(0)),fontSize:18},children:d?"Chargement...":(b==null?void 0:b.ytd_evolution)!=null?o(b.ytd_evolution):o(0)}),"					"]}),e.jsx("span",{style:{color:"#fff",fontSize:20},children:"⬆️"})]})]}),e.jsxs(_,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#f1f5f9",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:[e.jsxs("span",{style:{fontSize:22,color:"#1677ff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("span",{role:"img","aria-label":"shield",children:"🛡️"})," Non Vie"]}),e.jsx("span",{style:{fontSize:14,color:"#64748b",fontWeight:500,textAlign:"center",width:"100%"},children:"Assurance Générale"})]}),onClick:()=>l(n==="non-vie"?null:"non-vie"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["CA au ",j()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#0f172a"},children:d?"Chargement...":(C==null?void 0:C.ca_du_jour)!=null?s(C.ca_du_jour):s(0)})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"CA Cumulé à ce jour"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:d?"Chargement...":(C==null?void 0:C.ytd_ca)!=null?s(C.ytd_ca):s(0)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Croissance Cumulée"}),e.jsx("span",{style:{...J((C==null?void 0:C.ytd_evolution)!=null?o(C.ytd_evolution):o(0)),fontSize:18},children:d?"Chargement...":(C==null?void 0:C.ytd_evolution)!=null?o(C.ytd_evolution):o(0)}),e.jsx("span",{style:{color:"#059669",fontSize:20},children:"📈"})]})]}),e.jsxs(_,{styles:{body:{padding:24,background:"#fff",cursor:"pointer"},header:{background:"#f1f5f9",borderRadius:"12px 12px 0 0",padding:0}},style:{borderRadius:12,boxShadow:"0 2px 8px #e5e7eb",border:"1px solid #e5e7eb",minWidth:260,maxWidth:320,flex:1},title:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:2,width:"100%"},children:[e.jsxs("span",{style:{fontSize:22,color:"#1677ff",fontWeight:700,display:"flex",alignItems:"center",gap:8,justifyContent:"center"},children:[e.jsx("span",{role:"img","aria-label":"heart",children:"💙"})," Vie"]}),e.jsx("span",{style:{fontSize:14,color:"#64748b",fontWeight:500,textAlign:"center",width:"100%"},children:"Assurance Vie"})]}),onClick:()=>l(n==="vie"?null:"vie"),children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsxs("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:["CA au ",j()]}),e.jsx("div",{style:{fontSize:22,fontWeight:700,color:"#0f172a"},children:d?"Chargement...":(v==null?void 0:v.ca_du_jour)!=null?s(v.ca_du_jour):s(0)})]}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"CA Cumulé à ce jour"}),e.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#0f172a"},children:d?"Chargement...":(v==null?void 0:v.ytd_ca)!=null?s(v.ytd_ca):s(0)})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("div",{style:{fontSize:13,color:"#64748b",fontWeight:500},children:"Croissance Cumulée"}),e.jsx("span",{style:{...J((v==null?void 0:v.ytd_evolution)!=null?o(v.ytd_evolution):o(0)),fontSize:18},children:d?"Chargement...":(v==null?void 0:v.ytd_evolution)!=null?o(v.ytd_evolution):o(0)}),e.jsx("span",{style:{color:"#059669",fontSize:20},children:"📈"})]})]})]}),A&&e.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"16px",margin:"16px auto",maxWidth:"600px",textAlign:"center"},children:[e.jsx("div",{style:{color:"#dc2626",fontWeight:600,marginBottom:"8px"},children:"⚠️ Erreur de connexion à la base de données"}),e.jsxs("div",{style:{color:"#7f1d1d",fontSize:"14px"},children:[A,". Impossible de récupérer les données depuis la base de données."]})]}),n&&e.jsx("div",{className:"bg-white border border-zinc-200 rounded-xl shadow-sm p-2 mx-auto",style:{margin:"32px auto",maxWidth:1500,overflowX:"auto"},children:e.jsx(D,{className:"rounded-xl overflow-hidden text-lg w-full",columns:ee,dataSource:te(),pagination:!1,bordered:!0,scroll:{x:1300},size:"middle",title:()=>n==="non-vie"?"Détails Non Vie":n==="vie"?"Détails Vie":"Détails Total",rowClassName:u=>u.key==="total"?"bg-blue-100 font-bold":"bg-blue-50"})}),e.jsx("div",{style:{background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"12px 16px",margin:"0 auto 24px",maxWidth:"100%",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",overflowX:"auto"},children:e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap"},children:[{color:"#ef4444",text:"Chiffre d'affaires en baisse"},{color:"#fb923c",text:"Croissance inférieure à 5%"},{color:"#22c55e",text:"Croissance supérieure à 5%"},{color:"#15803d",text:"Croissance supérieure à 100%"}].map((u,r)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,minWidth:140,margin:"6px 8px"},children:[e.jsx("span",{style:{background:u.color,width:"clamp(10px, 2.2vw, 16px)",height:"clamp(10px, 2.2vw, 16px)",borderRadius:"50%",display:"inline-block",flex:"0 0 auto"}}),e.jsx("span",{style:{fontSize:"clamp(12px, 2.2vw, 14px)",color:"#121212ff"},children:u.text})]},r))})})]})}const st="/flashInfoApp/assets/MamdaMcma_Logo%20instit-BC1jT0T5.png",lt="/flashInfoApp/assets/coin-DihKcplc.png",rt=({onLogin:n})=>{const[l]=G.useForm(),[i,p]=y.useState(!1),[d,x]=y.useState(""),A=async j=>{p(!0),x("");try{const{username:N,password:w}=j;if(!N||!w){x("Veuillez fournir le nom d'utilisateur et le mot de passe."),p(!1);return}const k=await Xe(N,w);k&&k.token?(localStorage.setItem("flashinfo_token",k.token),n&&n(k.token)):x("Réponse inattendue du serveur.")}catch(N){if(N&&N.status===401)x("Nom d'utilisateur ou mot de passe incorrect.");else{const w=N&&N.message?N.message:"Erreur de connexion. Veuillez réessayer.";x(w)}}finally{p(!1)}},m=()=>{x("Veuillez remplir tous les champs requis.")};return e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"left-section",children:[e.jsx("div",{className:"gradient-background"}),e.jsx("div",{className:"particles-effect"}),e.jsx("div",{className:"left-content",children:e.jsxs("div",{className:"left-inner",children:[e.jsxs("div",{className:"graph-container",children:[e.jsx("img",{src:lt,alt:"Illustration financière avec graphiques et visualisations de données",className:"graph-image"}),e.jsx("div",{className:"graph-overlay"})]}),e.jsxs("h1",{className:"main-title",children:[e.jsx("span",{className:"title-gradient",children:"FlashInfo"}),e.jsx("br",{}),e.jsx("span",{className:"title-subtitle",children:"Dashboard"})]}),e.jsx("p",{className:"description",children:"Accédez instantanément à vos informations critiques et pilotez vos données en temps réel avec FlashInfo."}),e.jsxs("div",{className:"decorative-bars",children:[e.jsx("div",{className:"bar-1"}),e.jsx("div",{className:"bar-2"}),e.jsx("div",{className:"bar-3"})]}),e.jsx("div",{className:"info-card",children:e.jsx("div",{className:"info-row",children:e.jsx("span",{className:"info-value",children:"MAMDA • MCMA"})})})]})})]}),e.jsx("div",{className:"right-section",children:e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"header-section",children:[e.jsx("img",{src:st,alt:"Logo MamdaMcma",className:"logo"}),e.jsx("h2",{className:"welcome-title",children:e.jsx("span",{className:"welcome-gradient",children:"Bienvenue"})}),e.jsx("p",{className:"subtitle",children:"Connectez-vous à votre tableau de bord FlashInfo."})]}),d&&e.jsx(ve,{message:d,type:"error",showIcon:!0,style:{marginBottom:"24px"},closable:!0,onClose:()=>x("")}),e.jsx("div",{className:"form-section",children:e.jsxs(G,{form:l,name:"login",onFinish:A,onFinishFailed:m,layout:"vertical",size:"large",className:"custom-form",children:[e.jsx(G.Item,{name:"username",label:"Nom d'utilisateur",children:e.jsx(ce,{prefix:e.jsx(Se,{style:{color:"#951b81"}}),placeholder:"votre_nom_utilisateur",className:"custom-input"})}),e.jsx(G.Item,{name:"password",label:"Mot de passe",children:e.jsx(ce.Password,{prefix:e.jsx(ze,{style:{color:"#951b81"}}),placeholder:"••••••••",iconRender:j=>j?e.jsx(De,{style:{color:"#951b81"}}):e.jsx(_e,{style:{color:"#951b81"}}),className:"custom-input"})}),e.jsxs("div",{className:"checkbox-section",children:[e.jsx(G.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:e.jsx(Ne,{className:"custom-checkbox",children:"Se souvenir de moi"})}),e.jsx("a",{href:"#",className:"forgot-link",children:"Mot de passe oublié ?"})]}),e.jsx(G.Item,{style:{marginTop:"24px"},children:e.jsx(Ce,{type:"primary",htmlType:"submit",loading:i,className:"custom-button",children:i?"Connexion...":"Se connecter"})})]})}),e.jsxs("div",{className:"divider-section",children:[e.jsx("div",{className:"divider-line",children:e.jsx("div",{className:"divider-border"})}),e.jsx("div",{className:"divider-content",children:e.jsx("span",{className:"divider-text",children:"Ou continuer avec"})})]}),e.jsx("div",{className:"signup-section",children:e.jsxs("p",{className:"signup-text",children:["Vous n'avez pas de compte ?"," ",e.jsx("a",{href:"#",className:"signup-link",children:"S'inscrire"})]})})]})})]})})};function it(){const[n,l]=y.useState("flash-info"),[i,p]=y.useState(!1);return i?e.jsxs("div",{className:"min-h-screen bg-background-light text-zinc-800 font-display flex flex-col lg:flex-row",children:[e.jsx(Le,{selectedKey:n,onSelect:l}),e.jsxs("div",{className:"flex-1 lg:ml-56",children:[n==="dashboard"&&e.jsx(at,{}),n==="syntheseGlobale"&&e.jsx(Ze,{}),n==="flash-info"&&e.jsx(nt,{})]})]}):e.jsx(rt,{onLogin:()=>p(!0)})}be.createRoot(document.getElementById("root")).render(e.jsx(me.StrictMode,{children:e.jsx(it,{})}));
